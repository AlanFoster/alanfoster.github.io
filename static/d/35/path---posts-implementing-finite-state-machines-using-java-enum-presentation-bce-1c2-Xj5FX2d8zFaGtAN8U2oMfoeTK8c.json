{"data":{"content":{"id":"1e29e020-62c5-56a2-9b48-f4f41cc70a86","frontmatter":{"title":"Implementing Finite State Machines using Java's enums","workshop":null,"date":"22 January, 2012"},"fields":{"slug":"/posts/implementing-finite-state-machines-using-java-enum/"},"htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"I often see a lot of java programs which make use of enums for finite state machines. They perform logic based on switch statements. For instance they may do:"}]},{"type":"text","value":"\n\n            "},{"type":"element","tagName":"div","properties":{"className":["code-snippet"]},"children":[{"type":"text","value":"\n              \n              "},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"]},"children":[{"type":"text","value":"\n                "},{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"text","value":"protected enum State {\n  FOO, BAR;\n}\n\npublic static void main(String[] args) {\n  State currentState = State.FOO;\n  switch (currentState) {\n    case FOO :\n      // Perform specific logic\n      break;\n    case BAR :\n      // Perform specific logic\n      break;\n  }\n}"}]}]},{"type":"text","value":"\n              "}]},{"type":"text","value":"\n            "}]},{"type":"text","value":"\n          \n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Sure, this is fine. But it's not exactly very flexible is it? It's not taking advantage of the fact that enums can offer logic within the enum itself. For instance enums can offer a public abstract void method, which all enum constants must override and implement logic to."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"For instance"}]},{"type":"text","value":"\n\n            "},{"type":"element","tagName":"div","properties":{"className":["code-snippet"]},"children":[{"type":"text","value":"\n              \n              "},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"]},"children":[{"type":"text","value":"\n                "},{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"text","value":"protected enum State {\n  FOO {\n    @Override\n    protected void logic() {\n      // Perform specific logic\n    }\n  },\n  BAR {\n    @Override\n    protected void logic() {\n      // Perform specific logic\n    }\n  };\n\n  protected abstract void logic();\n}"}]}]},{"type":"text","value":"\n              "}]},{"type":"text","value":"\n            "}]},{"type":"text","value":"\n          \n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This means we can now execute our logic by doing"}]},{"type":"text","value":"\n\n            "},{"type":"element","tagName":"div","properties":{"className":["code-snippet"]},"children":[{"type":"text","value":"\n              \n              "},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"]},"children":[{"type":"text","value":"\n                "},{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"text","value":"public static void main(String[] args) {\n  State currentState = State.FOO;\n  currentState.logic();\n}"}]}]},{"type":"text","value":"\n              "}]},{"type":"text","value":"\n            "}]},{"type":"text","value":"\n          \n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Therefore it doesn't take much imagination to take this a step further and implement an 'actual' Java state machine such as"}]},{"type":"text","value":"\n\n            "},{"type":"element","tagName":"div","properties":{"className":["code-snippet"]},"children":[{"type":"text","value":"\n              \n              "},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"]},"children":[{"type":"text","value":"\n                "},{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"text","value":"protected enum State {\n  FOO {\n    int i;\n    @Override\n    protected State execute() {\n      return i++ >= 2 ? BAR : this;\n    }\n  },\n\n  BAR {\n    int i = 0;\n    @Override\n    protected State execute() {\n      return i++ == 0 ? FOO : HALT;\n    }\n  },\n\n  HALT {\n    @Override\n    protected State execute() {\n      return null;\n    }\n  };\n\n  protected abstract State execute();\n}\n\npublic static void main(String[] args) {\n  State currentState = State.FOO;\n  while((currentState = currentState.execute()) != State.HALT) {\n    System.out.println(currentState);\n  }\n}"}]}]},{"type":"text","value":"\n              "}]},{"type":"text","value":"\n            "}]},{"type":"text","value":"\n          \n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Hopefully this helps someone learn a bit more about enums, and potentially how to implement a finite state machine in java using enums."}]}],"data":{"quirksMode":false}}}},"pageContext":{"slug":"/posts/implementing-finite-state-machines-using-java-enum/"}}