{"componentChunkName":"component---src-templates-post-index-js","path":"/posts/practical-docker/","result":{"data":{"markdownRemark":{"html":"<p>Docker is a new and upcoming technology, this post walks through a high level overview of Docker and how you might incorporate it in to your workflow.</p>\n<!-- end-excerpt -->\n<h1 id=\"what-is-docker\" style=\"position:relative;\"><a href=\"#what-is-docker\" aria-label=\"what is docker permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What is Docker?</h1>\n<p><strong>Docker is a way to package applications and the associated dependencies into a single unit called an image</strong>. <strong>This image can then be shared and run as a container</strong>, either locally as a developer, or remotely in your production infrastructure.</p>\n<p>Some benefits include:</p>\n<ul>\n<li>Lightweight in comparison to virtual machines</li>\n<li>Quickly testing disposable containers which run arbitrary software</li>\n<li>By default the container's file systems are isolated from your host machine's file system</li>\n</ul>\n<p>Some limitations are:</p>\n<ul>\n<li>Runs in userspace. You can't test kernel exploits, run freebsd, run windows containers on linux, etc.</li>\n<li>Not really intended for graphical applications, even with X11 forwarding tricks etc.</li>\n</ul>\n<h3 id=\"example\" style=\"position:relative;\"><a href=\"#example\" aria-label=\"example permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Example</h3>\n<p>To run nginx, a simple web server, in a container the following can be used in your terminal:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">$ docker run <span class=\"token punctuation\">\\</span>\n\t--rm <span class=\"token punctuation\">\\</span>\n\t--publish <span class=\"token number\">127.0</span>.0.1:8080:80 <span class=\"token punctuation\">\\</span>\n\tnginx</code></pre>\n              </div>\n            </div>\n          \n<p>The important parts to note are:</p>\n<ul>\n<li><code>docker run</code> - We wish to run a command in a container</li>\n<li><code>nginx</code> - the image name that we want to run. Docker will download this, and create a container</li>\n<li><code>--rm</code> - automatically remove the container when the command exits</li>\n<li><code>--publish</code> - publish a container's ports to the host</li>\n</ul>\n<p>If you now visit <a href=\"http://localhost:8080\">http://localhost:8080</a> to see that the nginx server is running and available on your host machine:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0c15adc9c92328b5872bd99f782fdcaf/b0eb8/nginx.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.86666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACmElEQVQ4y62RS08TURTHGxfu2svMMOXhCxIekWBICpFHS1tKwURBojRRNi78Bu7dgn4HvgAbCGHBFwA2hvIoTA1FBvqYuWBaKAIzfczM8dxpgxLjguhJ/jlnTub87v2f62h0cnc97Y2koZl33e/wEaH7FXE+HiGPfFOkLfSOtA6/J82eYSLwNUQQeJRA3KJIamtriZsnpM4tkvr6OqfbLd5xsHjIuT942hs07kFNpqW1k3pDz2l/YJR29fho+5Me2ukZoG0dXVQURcrzPEqoZp5ygqByPH/CcZzscrk6beDoyLNPEy8nwOsbhJHwKIy9GIPJ1xF4+2YKIpMRGB8bB/wHhoaGIRgMQSgUBr8/AIODfvAGQtDX74W+vn6jpaV1wAaur69PK6oKa2trpe3tbXMLtbOzY8bjcVOS4ubGxgZ+75rpdNpWJpPBnKnU6bShKAocHR1ps7OzFWA2m525urqCpaWlMkKt1dVViEajsLm5CSsrK7C8vAyxWAz+ElY16zhfASJ9hnXw5HIymbRkWWYnwuHhoS1WK4oKx8cnkEqlQFHTkExV+pqm2cBCoaDPz89XgHh1G4gWy/v7+1YikWA1SJIEBwcy7O19BVlOwPl5Hs7O8nCaK0AuWwBdL4BpmjawVCrpCwsLN4G4tzJCLGaPwaRdCa1uQWwrBdEv3+HgmwqnpzmgigXHKnq1flm+AUSbNhDtlSmlFrPFhDXewIBSERek/bata46FUOtPIO5smjWLxSL2SyaTrut2xjbKQqE3y6yGZQtZTEZ1VrsG4s0+wz+GYRjlxcVFrw3EB/jIXuvi4iKHyt9SZ5eXlz/y+Tydm5t7agN7e3vvhcPhAb/f7w0EArdWMBj04Xx3U1OT0/G/A907fgJUjcW4gUr0EgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"nginx.png\"\n        title=\"nginx.png\"\n        src=\"/static/0c15adc9c92328b5872bd99f782fdcaf/dc2fe/nginx.png\"\n        srcset=\"/static/0c15adc9c92328b5872bd99f782fdcaf/fc8b9/nginx.png 163w,\n/static/0c15adc9c92328b5872bd99f782fdcaf/d53b1/nginx.png 325w,\n/static/0c15adc9c92328b5872bd99f782fdcaf/dc2fe/nginx.png 650w,\n/static/0c15adc9c92328b5872bd99f782fdcaf/6251f/nginx.png 975w,\n/static/0c15adc9c92328b5872bd99f782fdcaf/72325/nginx.png 1300w,\n/static/0c15adc9c92328b5872bd99f782fdcaf/b0eb8/nginx.png 1500w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>For this particular image it outputs useful log details to the terminal when running:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">$ docker run --rm --publish <span class=\"token number\">127.0</span>.0.1:8080:80 nginx\n<span class=\"token punctuation\">..</span>.\n<span class=\"token punctuation\">..</span>.\n/docker-entrypoint.sh: Configuration complete<span class=\"token punctuation\">;</span> ready <span class=\"token keyword\">for</span> start up\n<span class=\"token number\">172.17</span>.0.1 - - <span class=\"token punctuation\">[</span><span class=\"token number\">28</span>/Nov/2020:00:23:32 +0000<span class=\"token punctuation\">]</span> <span class=\"token string\">\"GET /favicon.ico HTTP/1.1\"</span> <span class=\"token number\">404</span> <span class=\"token number\">153</span> <span class=\"token string\">\"http://localhost:8080/\"</span> <span class=\"token string\">\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:83.0) Gecko/20100101 Firefox/83.0\"</span> <span class=\"token string\">\"-\"</span>\n<span class=\"token number\">2020</span>/11/28 00:23:32 <span class=\"token punctuation\">[</span>error<span class=\"token punctuation\">]</span> <span class=\"token number\">28</span><span class=\"token comment\">#28: *1 open() \"/usr/share/nginx/html/favicon.ico\" failed (2: No such file or directory), client: 172.17.0.1, server: localhost, request: \"GET /favicon.ico HTTP/1.1\", host: \"localhost:8080\", referrer: \"http://localhost:8080/\"</span>\n<span class=\"token number\">172.17</span>.0.1 - - <span class=\"token punctuation\">[</span><span class=\"token number\">28</span>/Nov/2020:00:23:36 +0000<span class=\"token punctuation\">]</span> <span class=\"token string\">\"GET / HTTP/1.1\"</span> <span class=\"token number\">200</span> <span class=\"token number\">612</span> <span class=\"token string\">\"-\"</span> <span class=\"token string\">\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:83.0) Gecko/20100101 Firefox/83.0\"</span> <span class=\"token string\">\"-\"</span>\n<span class=\"token number\">172.17</span>.0.1 - - <span class=\"token punctuation\">[</span><span class=\"token number\">28</span>/Nov/2020:00:23:36 +0000<span class=\"token punctuation\">]</span> <span class=\"token string\">\"GET / HTTP/1.1\"</span> <span class=\"token number\">304</span> <span class=\"token number\">0</span> <span class=\"token string\">\"-\"</span> <span class=\"token string\">\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:83.0) Gecko/20100101 Firefox/83.0\"</span> <span class=\"token string\">\"-\"</span></code></pre>\n              </div>\n            </div>\n          \n<h3 id=\"where-did-the-nginx-image-come-from\" style=\"position:relative;\"><a href=\"#where-did-the-nginx-image-come-from\" aria-label=\"where did the nginx image come from permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Where did the nginx image come from?</h3>\n<p><strong>Docker will first check locally for the required image</strong>, <strong>if it is not found it will attempt to download it</strong>. In this case the nginx image was retrieved from <strong><a href=\"https://hub.docker.com/_/nginx\">Docker Hub</a>.</strong> You can also directly search Docker Hub for any additional images that you require:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fec9d39fa8f2f41b28dd854a20e90253/8024e/docker-hub.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74.27536231884058%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAADSklEQVQ4y51RW2tUVxg9leYmGqtiONJqnwJaTAY1E02i6MTUhxRapIy++q4P4qMXYnAkf6CFBkswfRZiX4r1iBqDGmulpF6a6MycyXXuc2bOzJzr3vvr2ifWlkAp9IPF+ubbZ6+9vjXKbmVjw57tLV+2qRtO9fQeiw58Phjt6YtEu8J90W2bWqMbGtZFW5sboq1NH0Y3gTevbwog+48ktzTiHFjfjHnjVuVgqKct3Huovit8kLqPHKfI4Nd0/KuTdOyLE3R4YJC6+iLAUQqD9/UcoY5wH3V2H6J9vUdpdyhMn+3tps79B6gjtJ8+3dUZUbaeOKd2jcdL7WPz1PbNLOsce8v3jut8zw2dh36Y5x3jKXCKt4+l+OZvE3zHaIJ/PJrkO6/r/JPv4rz9+wTvuKGzHaNxartwq185ff6yejteNiazgiYWOP9xUYifF2zxU7ImHma4mMqKAJPo76e5eBj0Ijh7kFmd45w/yBJd1571K0OXLqpezTSIOLmOw23HJfIcItciYmDmroL/Be8d0Asw+QIs8BHNPJvuVy5cvKTOLy4btuORbTvcsmyq1iwyDJMKxTJl80VayeQpnc1TpVqnWh3ngGSjYlK2UBI12xV126XJqUdwODSkrqQzhmFUqFg0eBWXXLisejaZFnrXJc45+b5PjDGA/wOMEksZ8evruJhNLdO9yal+ZXh4WC2WDGNpJU36/CI3yhXyXI/yrkk5swSnZbip078VHhPlSkVYtk1PprHylaErar5QNMxqjep1iwPkyBxRUriEB8pYTWbrej45mLne38BvAU0hv5+WgrFYTF1aThvpTC7I0EaG7wV9RmVEUEGmFmYe1pYiq+wHLAV9xgRqVfBa7FrgcGFxmarVGocoBJ0gNw+XLMvCQ3aQmZythVRCvlKUHj9+AodXY2ouVyjqqQUqFEo+VmZwyJALw7pspVBm2VyOQZjBtLTCIBRA9j6UYMivmKZ0GFFGRka2Q8gt4l+uY9215XEEj3V8uPmvevr0lwHlzJmzW2Zmfr/5/Plv92Zn5+4A2tzcnJZKpbQ3b95qMy9eai9f/aG9ePVai8fjWjKZXIs7uq5riUTi7sTEREhBfQA0Ai1A8/+EvNsErPsTvj97AVjOPJcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./docker-hub.png\"\n        title=\"./docker-hub.png\"\n        src=\"/static/fec9d39fa8f2f41b28dd854a20e90253/dc2fe/docker-hub.png\"\n        srcset=\"/static/fec9d39fa8f2f41b28dd854a20e90253/fc8b9/docker-hub.png 163w,\n/static/fec9d39fa8f2f41b28dd854a20e90253/d53b1/docker-hub.png 325w,\n/static/fec9d39fa8f2f41b28dd854a20e90253/dc2fe/docker-hub.png 650w,\n/static/fec9d39fa8f2f41b28dd854a20e90253/6251f/docker-hub.png 975w,\n/static/fec9d39fa8f2f41b28dd854a20e90253/8024e/docker-hub.png 1104w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>You can also make use of <code>docker search</code>. I preference choosing the <code>official</code> images were possible:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"gatsby-highlight-code-line\">$ docker search postgres</span>NAME                                    DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED\n<span class=\"gatsby-highlight-code-line\">postgres                                The PostgreSQL object-relational database sy…   <span class=\"token number\">8613</span>                <span class=\"token punctuation\">[</span>OK<span class=\"token punctuation\">]</span></span>sameersbn/postgresql                                                                    <span class=\"token number\">155</span>                                     <span class=\"token punctuation\">[</span>OK<span class=\"token punctuation\">]</span>\npaintedfox/postgresql                   A docker image <span class=\"token keyword\">for</span> running Postgresql.          <span class=\"token number\">77</span>                                      <span class=\"token punctuation\">[</span>OK<span class=\"token punctuation\">]</span>\nbitnami/postgresql                      Bitnami PostgreSQL Docker Image                 <span class=\"token number\">70</span>                                      <span class=\"token punctuation\">[</span>OK<span class=\"token punctuation\">]</span>\ncentos/postgresql-96-centos7            PostgreSQL is an advanced Object-Relational …   <span class=\"token number\">45</span>\npostgrest/postgrest                     REST API <span class=\"token keyword\">for</span> any Postgres database              <span class=\"token number\">36</span>\narm32v7/postgres                        The PostgreSQL object-relational database sy…   <span class=\"token number\">26</span>\n<span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span></code></pre>\n              </div>\n            </div>\n          \n<p>The Docker CLI can interact with other repositories too. For instance you can run your own private repositories if you are part of a large organization. You can view the current configuration for the Docker with <code>docker info</code>:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"gatsby-highlight-code-line\">$ docker info</span>Client:\n Debug Mode: <span class=\"token boolean\">false</span>\n\nServer:\n  <span class=\"token punctuation\">..</span>.\n  <span class=\"token punctuation\">..</span>.\n<span class=\"gatsby-highlight-code-line\"> Registry: https://index.docker.io/v1/</span></code></pre>\n              </div>\n            </div>\n          \n<p>Note that the above output uses the terminology <code>Client</code> and <code>Server</code>. The Docker CLI is the Client which interacts with the Server. The Docker daemon generally runs on the host machine, but you can also interact with remote Docker servers.</p>\n<h3 id=\"how-did-docker-know-to-run-nginx\" style=\"position:relative;\"><a href=\"#how-did-docker-know-to-run-nginx\" aria-label=\"how did docker know to run nginx permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How did docker know to run nginx?</h3>\n<p><strong>The  docker image will specify a single command to run</strong>. <strong>When that process ends, the docker container will stop</strong>. We can use the docker CLI tools to inspect a particular image and see its configuration. If we look closely, we can clearly see the <code>Cmd</code> configuration:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-json\"><code class=\"language-json\">$ docker image inspect nginx\n<span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"Id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"sha256:bc9a0695f5712dcaaa09a5adc415a3936ccba13fc2587dfd76b1b8aeea3f221c\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"RepoTags\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token string\">\"nginx:latest\"</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"RepoDigests\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token string\">\"nginx@sha256:6b1daa9462046581ac15be20277a7c75476283f969cb3a61c8725ec38d3b01c3\"</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"Parent\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"Comment\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"Created\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2020-11-25T00:30:19.011398516Z\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"Container\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"279e6916c4aaaf5d61e468508abd96933f4e48194bd979dc692e0196cde2d59d\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"ContainerConfig\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"Hostname\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"279e6916c4aa\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Domainname\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"User\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"AttachStdin\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"AttachStdout\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"AttachStderr\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"ExposedPorts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token property\">\"80/tcp\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Tty\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"OpenStdin\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"StdinOnce\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Env\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token string\">\"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"NGINX_VERSION=1.19.5\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"NJS_VERSION=0.4.4\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"PKG_RELEASE=1~buster\"</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Cmd\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token string\">\"/bin/sh\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"-c\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"#(nop) \"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"CMD [\\\"nginx\\\" \\\"-g\\\" \\\"daemon off;\\\"]\"</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Image\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"sha256:2b3c3cbe8cc157ef2c15e693980ae186cffc7b7be17afb34f35de8d7c57a3169\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Volumes\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"WorkingDir\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Entrypoint\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token string\">\"/docker-entrypoint.sh\"</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"OnBuild\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Labels\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token property\">\"maintainer\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"NGINX Docker Maintainers &lt;docker-maint@nginx.com>\"</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"StopSignal\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"SIGQUIT\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"DockerVersion\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"19.03.12\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"Author\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"Config\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"Hostname\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Domainname\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"User\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"AttachStdin\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"AttachStdout\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"AttachStderr\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"ExposedPorts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token property\">\"80/tcp\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Tty\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"OpenStdin\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"StdinOnce\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Env\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token string\">\"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"NGINX_VERSION=1.19.5\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"NJS_VERSION=0.4.4\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"PKG_RELEASE=1~buster\"</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">            <span class=\"token property\">\"Cmd\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></span><span class=\"gatsby-highlight-code-line\">                <span class=\"token string\">\"nginx\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">                <span class=\"token string\">\"-g\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">                <span class=\"token string\">\"daemon off;\"</span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></span>            <span class=\"token property\">\"Image\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"sha256:2b3c3cbe8cc157ef2c15e693980ae186cffc7b7be17afb34f35de8d7c57a3169\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Volumes\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"WorkingDir\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Entrypoint\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token string\">\"/docker-entrypoint.sh\"</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"OnBuild\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Labels\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token property\">\"maintainer\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"NGINX Docker Maintainers &lt;docker-maint@nginx.com>\"</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"StopSignal\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"SIGQUIT\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"Architecture\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"amd64\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"Os\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"linux\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"Size\"</span><span class=\"token operator\">:</span> <span class=\"token number\">132895204</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"VirtualSize\"</span><span class=\"token operator\">:</span> <span class=\"token number\">132895204</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"GraphDriver\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"Data\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token property\">\"LowerDir\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/var/lib/docker/overlay2/f38f94ded261df67599930796ee5bb17bcc4ea787644ad24d08ec16860a3aee6/diff:/var/lib/docker/overlay2/696612bb94b1c43743b6d560b443d51ecf40bfab02601451f9a40e64235f5452/diff:/var/lib/docker/overlay2/881d1f47c3bfdad56f12aa72e61c7c57cd8476db17a0de942234c46a351249fd/diff:/var/lib/docker/overlay2/6e32fb22d14ebcfcb8354f333680157e700ee495be133a7ccbdbb273f743d66d/diff\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"MergedDir\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/var/lib/docker/overlay2/eb47fdab787bc99e1116b86a63c5069051ad92e2a029bbd4f4d275e79e4650af/merged\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"UpperDir\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/var/lib/docker/overlay2/eb47fdab787bc99e1116b86a63c5069051ad92e2a029bbd4f4d275e79e4650af/diff\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"WorkDir\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/var/lib/docker/overlay2/eb47fdab787bc99e1116b86a63c5069051ad92e2a029bbd4f4d275e79e4650af/work\"</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"overlay2\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"RootFS\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"Type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"layers\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Layers\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token string\">\"sha256:f5600c6330da7bb112776ba067a32a9c20842d6ecc8ee3289f1a713b644092f8\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"sha256:7ccabd267c9f125d6eeac54e32f6fbb338431828a3ee4c61600a301205e16627\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"sha256:850c2400ea4dc52c17a0a8f8dd740628fbbf2fac8c24ce12f5c540f2d8e4a835\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"sha256:f790aed835eec5d82dae9e0cbb9021063d9fe71885542f11b7a46631176301f7\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"sha256:7e914612e36657b45436586984a556f9d3762e8e03374c6cd8c5d9e460a00c51\"</span>\n            <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"Metadata\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"LastTagTime\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0001-01-01T00:00:00Z\"</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre>\n              </div>\n            </div>\n          \n<p>Note that <code>docker run</code> allows you to specify an arbitrary command:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">$ docker run --help\n\nUsage:\tdocker run <span class=\"token punctuation\">[</span>OPTIONS<span class=\"token punctuation\">]</span> IMAGE <span class=\"token punctuation\">[</span>COMMAND<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>ARG<span class=\"token punctuation\">..</span>.<span class=\"token punctuation\">]</span>\n\nRun a <span class=\"token builtin class-name\">command</span> <span class=\"token keyword\">in</span> a new container</code></pre>\n              </div>\n            </div>\n          \n<p> This will take precedence over the default <code>nginx</code> command. For instance:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">$ docker run --help\nUsage:\tdocker run <span class=\"token punctuation\">[</span>OPTIONS<span class=\"token punctuation\">]</span> IMAGE <span class=\"token punctuation\">[</span>COMMAND<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>ARG<span class=\"token punctuation\">..</span>.<span class=\"token punctuation\">]</span>\n\nRun a <span class=\"token builtin class-name\">command</span> <span class=\"token keyword\">in</span> a new container\n\n$ docker run <span class=\"token punctuation\">\\</span>\n  --rm <span class=\"token punctuation\">\\</span>\n\t--publish <span class=\"token number\">127.0</span>.0.1:8080:80 <span class=\"token punctuation\">\\</span>\n\tnginx <span class=\"token punctuation\">\\</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"hello from inside of the container\"</span>\nhello from inside of the container\n$</code></pre>\n              </div>\n            </div>\n          \n<p>More interestingly, <strong>you can run this container with an interactive pseudo-tty</strong>. This allows you to run arbitrary commands from within the container in a similar manner to having SSH'd in to the container:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">$ docker run --help\nUsage:\tdocker run <span class=\"token punctuation\">[</span>OPTIONS<span class=\"token punctuation\">]</span> IMAGE <span class=\"token punctuation\">[</span>COMMAND<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>ARG<span class=\"token punctuation\">..</span>.<span class=\"token punctuation\">]</span>\n\nRun a <span class=\"token builtin class-name\">command</span> <span class=\"token keyword\">in</span> a new container\n\n$ docker run <span class=\"token punctuation\">\\</span>\n  --rm <span class=\"token punctuation\">\\</span>\n\t--publish <span class=\"token number\">127.0</span>.0.1:8080:80 <span class=\"token punctuation\">\\</span>\n\t--interactive <span class=\"token punctuation\">\\</span>\n\t--tty <span class=\"token punctuation\">\\</span>\n\tnginx <span class=\"token punctuation\">\\</span>\n  /bin/bash\nroot@2c0645b7bba2:/<span class=\"token comment\"># echo \"hello from inside the container\"</span>\nhello from inside the container\nroot@2c0645b7bba2:/<span class=\"token comment\"># nginx -v</span>\nnginx version: nginx/1.19.5</code></pre>\n              </div>\n            </div>\n          \n<p>You will often find the shorthand flags being used to achieve the same effect:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Full flag names</span>\n$ docker run <span class=\"token punctuation\">\\</span>\n  --rm <span class=\"token punctuation\">\\</span>\n\t--publish <span class=\"token number\">127.0</span>.0.1:8080:80 <span class=\"token punctuation\">\\</span>\n\t--interactive <span class=\"token punctuation\">\\</span>\n\t--tty <span class=\"token punctuation\">\\</span>\n\tnginx <span class=\"token punctuation\">\\</span>\n  /bin/bash\n\n<span class=\"token comment\"># With shorthands:</span>\n$ docker run --rm -p <span class=\"token number\">127.0</span>.0.1:8080:80 -it nginx /bin/bash</code></pre>\n              </div>\n            </div>\n          \n<h3 id=\"how-do-i-run-older-versions-of-software\" style=\"position:relative;\"><a href=\"#how-do-i-run-older-versions-of-software\" aria-label=\"how do i run older versions of software permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How do I run older versions of software?</h3>\n<p>Similar to Git, Docker uses tags for versioning images. The format <code>**image_name:tag**</code> is used. If you don't specify a specific tag within the run command, it will default to <code>latest</code>. For example:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">docker run --rm nginx\ndocker run --rm nginx:latest\ndocker run --rm nginx:1.19.5\ndocker run --rm nginx:1.7.1</code></pre>\n              </div>\n            </div>\n          \n<p>Docker Hub also provides a searchable list of the available tags:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5ee683cb21b26f63ec281166fd7a23d8/8024e/docker-hub-tags.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74.27536231884058%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAACwUlEQVQ4y52SS08UQRDHZ2EXEPUCiRkvxqMmBoMgLyWwKyQQE58ZjF/Ag4l3YHnoJho9+UVM8CzgRSEKJkQOhkR2UYRlkZ3peb+2u8vqYV1WMZpYmV+qp1P1r+6qlk5LxxKnmhuuNTQ13mnpuKJ09g0prd0DypnWS0rj0eNKLBZTamvjSk1NbeQF8Xgi8nV19UoiIdYJJY7r+kSiWeq70HNiMNnrdF3ugYHBIbh+Q4GRkbtw6+ZtGB6+Cv39yYhkMlVZ9/b2Rb69vQPaL3ZCd1cXdLa1wdlzLUkpPZmWt/M7Wj5fgHw+Tze/bbH89z32pVBkhq4zQsghNE2LfLGosqKqin+qqUWYm59PSVOTU7LreoQDAKWMUUq5GzJu+pSXSpTj3j9h+HEUWF5eTknj6QlZ1w0ShiF4ns8Q8FwPfAQLgeO4kXer/kWMWOu6CYZh8iAIuO8H8ObtQkrKTE3IhuUSjwJgGQZYiiOs7P9EEITgoKCN4kEY8qDEOF4Glt6/S0lPMtMyMW2iWgFYlslMN4SQ4f0Bk+HAIrHyjuuJ0xkRuOa+EMScSPBZZkLWTJdsEADdZUwIsbISw9/NrW2wbPtAlFeXETGc7xR2uW4YsLKykpKePhyVNcsn25jjhTwSrL6eCPR8/xfBqCVYTCC2bcfhIiYayujYuOw4DqmcCYNw0hV+Jlfv7YvxCDHlqD9oC4uLeMLMJF7ZIbsWh4IeMD/EJF7uIYdDJxNm2Q7sqSrsFVXQiM4dv4R95PBhCXv4aHpaNkxbVU0PcDgl2wup0MRsfJWM4jTxUIyiWIX950ppCR+q6/nUctwSehzKUlJ6/jh9kthh8DUACOCwqUQHDn83F/snbr76cXVAenD/XtOntc8vVtc2Xq9nc69yudxsNevZ7GwW+X2/iigHY+ZmZl6el9BiSB1yBGn4T0RuPVLzAzHgnnLvvLvnAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"docker-hub-tags\"\n        title=\"docker-hub-tags\"\n        src=\"/static/5ee683cb21b26f63ec281166fd7a23d8/dc2fe/docker-hub-tags.png\"\n        srcset=\"/static/5ee683cb21b26f63ec281166fd7a23d8/fc8b9/docker-hub-tags.png 163w,\n/static/5ee683cb21b26f63ec281166fd7a23d8/d53b1/docker-hub-tags.png 325w,\n/static/5ee683cb21b26f63ec281166fd7a23d8/dc2fe/docker-hub-tags.png 650w,\n/static/5ee683cb21b26f63ec281166fd7a23d8/6251f/docker-hub-tags.png 975w,\n/static/5ee683cb21b26f63ec281166fd7a23d8/8024e/docker-hub-tags.png 1104w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>There is also Kitematic for Mac. It is now marked being deprecated, but it is still useful:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/17ab84e04d7cc78de31c61d62d3d0f64/b16a2/kitematic.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69.51456310679612%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACu0lEQVQ4y6WT30sUURTHF596CEIfe+glqP6KHqutDHrwLaglt4ywEAqCDdSCpDVXSULT3CLqJScNIsLQpxT6peu66ubi+mPX1W11dn7PvTNz95zujCVrhj104MvMHIbP+Z57zvW9eD5aUVydPypKa6cURT1RKBT8oij6i7Lsl7kURfGkckmS5Je5dE31q+o2nZRk+djH0bE9vubGjn1ifjkD6KAbFithCXePEuzMEWrBwMDgQV+wNlClaMaimwQAxv8FYjPIFGQoKgZYTgko/6YWA1U3N0VsMIkFBpdOrBKhDmo6saPRp4d9gUCgkhBzcbMyuOYgp9kQ+iLC99wGFMUihxiuJ7jfGoG7LWFg/N2ybXAYL8QLEouhyoE9vX2HXGCVaZpLZUBcUGw8M1LE1A8FdVVFWdW8tuquNWDwaj3vBFHhOWrZ6LAtoNP7JPp3YFaxsH4kgysKxRJjSG0HCc8/DLdhV1vEg1NqoeEAisTZAvbsAPJwn0srebzZFMa5zCoyDnQsy4Nkmm7h/O0b6Pq1KEXbttF2dnP4C7iQK2BNqBOz+XVkDndnmmjz/FpDHeauX0KJt6wpKvKhoDvAfzrM5jfw8r0uzBaK3nnZvGWV52PdHTj9uMODu0dB+E5IZBcg2wRCMr0Ip2vrYTKZAsM0wTSJN+VHPRGIdLaAplPQDQNsy4LSn0M5fyFQyYFpD8iYW5zNpJfZgeM1bHZ+gem6wdZFifG1Z+2tD1h7OMwcBkyWVaYRyjTqOCbfHQ6k3tpcCV6sMggtlG89lWV8dSeEpqZtuw1D44M4zFUevy+NeyP6os+O+M6drd77ORbv/JqYfROfSvTHk3PC+Pu3wkSwWvg0/EGYmUsJM9MJIZVMC91DjULnu5AwOvZNiE3GhGQyKUwlpvsnJqdex+KJl41Nzft9ZVHxn/LiJ4WnehAq6azjAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"kitematic\"\n        title=\"kitematic\"\n        src=\"/static/17ab84e04d7cc78de31c61d62d3d0f64/dc2fe/kitematic.png\"\n        srcset=\"/static/17ab84e04d7cc78de31c61d62d3d0f64/fc8b9/kitematic.png 163w,\n/static/17ab84e04d7cc78de31c61d62d3d0f64/d53b1/kitematic.png 325w,\n/static/17ab84e04d7cc78de31c61d62d3d0f64/dc2fe/kitematic.png 650w,\n/static/17ab84e04d7cc78de31c61d62d3d0f64/6251f/kitematic.png 975w,\n/static/17ab84e04d7cc78de31c61d62d3d0f64/b16a2/kitematic.png 1030w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"viewing-locally-available-images\" style=\"position:relative;\"><a href=\"#viewing-locally-available-images\" aria-label=\"viewing locally available images permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Viewing locally available images</h3>\n<p>You can view the images that you have installed locally with <code>docker image ls</code>. The output will show you the available tags, names, and image ids:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">$ docker image <span class=\"token function\">ls</span>\nREPOSITORY                                 TAG                 IMAGE ID            CREATED             SIZE\npostgres                                   <span class=\"token number\">10</span>-alpine           26a036bbaf0d        <span class=\"token number\">2</span> weeks ago         <span class=\"token number\">71</span>.9MB\nimpacket                                   latest              50232cf74f35        <span class=\"token number\">2</span> weeks ago         155MB\nphp                                        <span class=\"token number\">7.4</span>.11-apache       fb9212e0da7b        <span class=\"token number\">4</span> weeks ago         414MB\nzookeeper                                  latest              404dbf6821a5        <span class=\"token number\">5</span> weeks ago         253MB\nruby                                       <span class=\"token number\">2.7</span>.2-alpine3.12    79f5adf3c887        <span class=\"token number\">5</span> weeks ago         <span class=\"token number\">51</span>.7MB\npython                                     <span class=\"token number\">3</span>-slim              8842fc1a4cb7        <span class=\"token number\">5</span> weeks ago         115MB\nnginx                                      alpine              6b87290481e7        <span class=\"token number\">6</span> weeks ago         133MB\npython                                     <span class=\"token number\">3.7</span>-slim-buster     c55447e52803        <span class=\"token number\">6</span> weeks ago         112MB\nrust                                       <span class=\"token number\">1.47</span>                2f75dad0e7a5        <span class=\"token number\">6</span> weeks ago         <span class=\"token number\">1</span>.28GB\nnginx                                      latest              992e3b7be046        <span class=\"token number\">7</span> weeks ago         133MB\nphp                                        <span class=\"token number\">7.2</span>-apache          ed14925495ea        <span class=\"token number\">8</span> weeks ago         410MB\npostgres                                   <span class=\"token number\">12.4</span>-alpine         47aa97c69678        <span class=\"token number\">8</span> weeks ago         159MB</code></pre>\n              </div>\n            </div>\n          \n<h3 id=\"viewing-local-containers\" style=\"position:relative;\"><a href=\"#viewing-local-containers\" aria-label=\"viewing local containers permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Viewing local containers</h3>\n<p>You can view the currently running containers with <code>docker container ls</code>. Here we can also see the current command that is being run:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">docker container <span class=\"token function\">ls</span>\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                                            NAMES\nf2f6f5d7757d        nginx               <span class=\"token string\">\"/docker-entrypoint.…\"</span>   <span class=\"token number\">41</span> seconds ago      Up <span class=\"token number\">41</span> seconds       <span class=\"token number\">127.0</span>.0.1:8080-<span class=\"token operator\">></span><span class=\"token number\">80</span>/tcp                           hardcore_lamport\nfdc1517cc475        tomcat:8.5.32       <span class=\"token string\">\"catalina.sh run\"</span>        <span class=\"token number\">10</span> hours ago        Up <span class=\"token number\">10</span> hours         <span class=\"token number\">0.0</span>.0.0:8009-<span class=\"token operator\">></span><span class=\"token number\">8009</span>/tcp, <span class=\"token number\">0.0</span>.0.0:8090-<span class=\"token operator\">></span><span class=\"token number\">8080</span>/tcp   tomcat</code></pre>\n              </div>\n            </div>\n          \n<h2 id=\"creating-your-own-docker-images\" style=\"position:relative;\"><a href=\"#creating-your-own-docker-images\" aria-label=\"creating your own docker images permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creating your own docker images</h2>\n<h2 id=\"basic-terminology\" style=\"position:relative;\"><a href=\"#basic-terminology\" aria-label=\"basic terminology permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Basic Terminology</h2>\n<p>Before we get started writing our images, here's some terminology to consider:</p>\n<ul>\n<li><code>Dockerfile</code> - Contains a sequence of steps to create the final docker image(s)</li>\n<li><code>Image Layers</code> - A layer will be created for each step in your Dockerfile</li>\n<li><code>Build context</code> - The set of files which we can reference during the image build process</li>\n<li><code>Docker Image</code> - An immutable snapshot of your software dependencies. Think OOP classes.</li>\n<li><code>Docker Container</code> - A running version of your image. Think OOP instances.</li>\n</ul>\n<p>Let's run through a quick example for <strong>creating a python image</strong>. Our application is extremely simple, the folder structure will look like:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-json\"><code class=\"language-json\">.\n├── .dockerignore\n├── Dockerfile\n├── Pipfile\n├── Pipfile.lock\n└── main.py\n\n<span class=\"token number\">0</span> directories<span class=\"token punctuation\">,</span> <span class=\"token number\">5</span> files</code></pre>\n              </div>\n            </div>\n          \n<p>The <strong><code>main.py</code></strong> file will use Flask to host a simple hello world server on port 8000:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> flask <span class=\"token keyword\">import</span> Flask\napp <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span>\n\n<span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">hello_world</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">'Hello, World!\\n'</span>\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># Inside of your application code, preference binding to 0.0.0.0</span>\n    app<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span>host<span class=\"token operator\">=</span><span class=\"token string\">'0.0.0.0'</span><span class=\"token punctuation\">,</span> port<span class=\"token operator\">=</span><span class=\"token number\">80</span><span class=\"token punctuation\">)</span></code></pre>\n              </div>\n            </div>\n          \n<p>The python application depends on Flask, so we can make use of <strong><code>Pipfile</code></strong> to specify our program's dependencies:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-python\"><code class=\"language-python\"><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>source<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\nname <span class=\"token operator\">=</span> <span class=\"token string\">\"pypi\"</span>\nurl <span class=\"token operator\">=</span> <span class=\"token string\">\"https://pypi.org/simple\"</span>\nverify_ssl <span class=\"token operator\">=</span> true\n\n<span class=\"token punctuation\">[</span>dev<span class=\"token operator\">-</span>packages<span class=\"token punctuation\">]</span>\n\n<span class=\"token punctuation\">[</span>packages<span class=\"token punctuation\">]</span>\nflask <span class=\"token operator\">=</span> <span class=\"token string\">'1.1.2'</span>\n\n<span class=\"token punctuation\">[</span>requires<span class=\"token punctuation\">]</span>\npython_version <span class=\"token operator\">=</span> <span class=\"token string\">\"3.7\"</span></code></pre>\n              </div>\n            </div>\n          \n<p> Finally we can create the new <strong><code>Dockerfile</code></strong> which will define how to build our image:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-docker\"><code class=\"language-docker\"><span class=\"token keyword\">FROM</span> python<span class=\"token punctuation\">:</span>3.7.3<span class=\"token punctuation\">-</span>alpine3.9\n\n<span class=\"token keyword\">WORKDIR</span> /app\n\n<span class=\"token keyword\">RUN</span> pip install pipenv\n<span class=\"token keyword\">COPY</span> Pipfile Pipfile.lock ./\n<span class=\"token keyword\">RUN</span> pipenv install <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>deploy <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>dev <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>ignore<span class=\"token punctuation\">-</span>pipfile <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>system\n\n<span class=\"token keyword\">COPY</span> . .\n\n<span class=\"token keyword\">CMD</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"python3\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"main.py\"</span><span class=\"token punctuation\">]</span></code></pre>\n              </div>\n            </div>\n          \n<p>With comments:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-docker\"><code class=\"language-docker\"><span class=\"token comment\"># FROM - The base image to use</span>\n<span class=\"token keyword\">FROM</span> python<span class=\"token punctuation\">:</span>3.7.3<span class=\"token punctuation\">-</span>alpine3.9\n\n<span class=\"token comment\"># WORKDIR - Specify the working directory; Future ADD/COPY/CMD/RUN commands will execute within this directory</span>\n<span class=\"token keyword\">WORKDIR</span> /app\n\n<span class=\"token comment\"># RUN - Arbitrary commands</span>\n<span class=\"token keyword\">RUN</span> pip install pipenv\n\n<span class=\"token comment\"># COPY - files from the docker context in to the current layer</span>\n<span class=\"token keyword\">COPY</span> Pipfile Pipfile.lock ./\n\n<span class=\"token comment\"># RUN - Arbitrary commands</span>\n<span class=\"token keyword\">RUN</span> pipenv install <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>deploy <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>dev <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>ignore<span class=\"token punctuation\">-</span>pipfile <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>system\n\n<span class=\"token comment\"># COPY - The remaining context files to the current image's filesystem</span>\n<span class=\"token keyword\">COPY</span> . .\n\n<span class=\"token comment\"># CMD - Specify the default command to run the flask application</span>\n<span class=\"token keyword\">CMD</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"python3\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"main.py\"</span><span class=\"token punctuation\">]</span></code></pre>\n              </div>\n            </div>\n          \n<p>Docker will sequentially run through each command in your Dockerfile. Common commands are:</p>\n<ul>\n<li><code>FROM</code> - Specify a base image to run the following commands on</li>\n<li><code>RUN</code> - Run arbitrary commands from within the context of that layer</li>\n<li><code>WORKDIR</code> -Specify the working directory; Future ADD/COPY/CMD/RUN commands will execute within this directory</li>\n<li><code>COPY</code> - Copy files from the docker build context in to the image's filesystem</li>\n<li><code>CMD</code> - Default command to run within a container if none is specified</li>\n</ul>\n<p>Our next step is <strong>building the image</strong>:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">$ docker build --tag image_name:latest <span class=\"token builtin class-name\">.</span></code></pre>\n              </div>\n            </div>\n          \n<p>Note that the final <code>.</code> is used to specify the build context. Docker will look for a <code>Dockerfile</code> by default in the directory, however you can also manually specify both. Generally it's best to follow the normal convention of keeping your Dockerfile in the top level of the project that you're developing. You can specify other parameters if you wish:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">$ docker build -t image_name:1.0.0 -f some_folder/DockerFile ./some_build_context</code></pre>\n              </div>\n            </div>\n          \n<p>Let's see the full build results:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">$ docker build --tag image_name:latest <span class=\"token builtin class-name\">.</span>\n<span class=\"gatsby-highlight-code-line\">Sending build context to Docker daemon  <span class=\"token number\">10</span>.24kB</span><span class=\"gatsby-highlight-code-line\">Step <span class=\"token number\">1</span>/7 <span class=\"token builtin class-name\">:</span> FROM python:3.7.3-alpine3.9</span><span class=\"gatsby-highlight-code-line\"> ---<span class=\"token operator\">></span> fe3ef29c73f3</span>Step <span class=\"token number\">2</span>/7 <span class=\"token builtin class-name\">:</span> WORKDIR  /app\n ---<span class=\"token operator\">></span> Running <span class=\"token keyword\">in</span> cf3cdce061ed\nRemoving intermediate container cf3cdce061ed\n ---<span class=\"token operator\">></span> 0dd0597e8d53\nStep <span class=\"token number\">3</span>/7 <span class=\"token builtin class-name\">:</span> RUN pip <span class=\"token function\">install</span> pipenv\n ---<span class=\"token operator\">></span> Running <span class=\"token keyword\">in</span> 1815f94b39e5\nCollecting pipenv\n  Downloading hrom pipenv<span class=\"token punctuation\">)</span>\n  Downloading https://files.pythonhosted.org/packages/79/88/66ac964ab8cf87c8db839c11812292a966825af205411cb67477cb4e73d3/virtualenv-20.2.1-py2.py3-none-any.whl <span class=\"token punctuation\">(</span><span class=\"token number\">4</span>.9MB<span class=\"token punctuation\">)</span>\nRequirement already satisfied: setuptools<span class=\"token operator\">></span><span class=\"token operator\">=</span><span class=\"token number\">36.2</span>.1 <span class=\"token keyword\">in</span> /usr/local/lib/python3.7/site-packages <span class=\"token punctuation\">(</span>from pipenv<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span><span class=\"token number\">41.0</span>.1<span class=\"token punctuation\">)</span>\nCollecting certifi <span class=\"token punctuation\">(</span>from pipenv<span class=\"token punctuation\">)</span>\n  Downloading https://files.pythonhosted.org/packages/c1/6f/3d85f0850962279a7e4c622695d7b3171e95ac65308a57d3b29738b27149/certifi-2020.11.8-py2.py3-none-any.whl <span class=\"token punctuation\">(</span>155kB<span class=\"token punctuation\">)</span>\nCollecting distlib<span class=\"token operator\">&lt;</span><span class=\"token number\">1</span>,<span class=\"token operator\">></span><span class=\"token operator\">=</span><span class=\"token number\">0.3</span>.1 <span class=\"token punctuation\">(</span>from virtualenv-<span class=\"token operator\">></span>pipenv<span class=\"token punctuation\">)</span>\n  Downloading https://files.pythonhosted.org/packages/f5/0a/490fa011d699bb5a5f3a0cf57de82237f52a6db9d40f33c53b2736c9a1f9/distlib-0.3.1-py2.py3-none-any.whl <span class=\"token punctuation\">(</span>335kB<span class=\"token punctuation\">)</span>\nCollecting filelock<span class=\"token operator\">&lt;</span><span class=\"token number\">4</span>,<span class=\"token operator\">></span><span class=\"token operator\">=</span><span class=\"token number\">3.0</span>.0 <span class=\"token punctuation\">(</span>from virtualenv-<span class=\"token operator\">></span>pipenv<span class=\"token punctuation\">)</span>\n  Downloading https://files.pythonhosted.org/packages/93/83/71a2ee6158bb9f39a90c0dea1637f81d5eef866e188e1971a1b1ab01a35a/filelock-3.0.12-py3-none-any.whl\nCollecting appdirs<span class=\"token operator\">&lt;</span><span class=\"token number\">2</span>,<span class=\"token operator\">></span><span class=\"token operator\">=</span><span class=\"token number\">1.4</span>.3 <span class=\"token punctuation\">(</span>from virtualenv-<span class=\"token operator\">></span>pipenv<span class=\"token punctuation\">)</span>\n  Downloading https://files.pythonhosted.org/packages/3b/00/2344469e2084fb287c2e0b57b72910309874c3245463acd6cf5e3db69324/appdirs-1.4.4-py2.py3-none-any.whl\nCollecting importlib-metadata<span class=\"token operator\">></span><span class=\"token operator\">=</span><span class=\"token number\">0.12</span><span class=\"token punctuation\">;</span> python_version <span class=\"token operator\">&lt;</span> <span class=\"token string\">\"3.8\"</span> <span class=\"token punctuation\">(</span>from virtualenv-<span class=\"token operator\">></span>pipenv<span class=\"token punctuation\">)</span>\n  Downloading https://files.pythonhosted.org/packages/4a/c3/78826cdf0f7bf2d307aa4c6922aac9bd53c5d4f0de64e7db52771e641c8f/importlib_metadata-3.1.0-py2.py3-none-any.whl\nCollecting six<span class=\"token operator\">&lt;</span><span class=\"token number\">2</span>,<span class=\"token operator\">></span><span class=\"token operator\">=</span><span class=\"token number\">1.9</span>.0 <span class=\"token punctuation\">(</span>from virtualenv-<span class=\"token operator\">></span>pipenv<span class=\"token punctuation\">)</span>\n  Downloading https://files.pythonhosted.org/packages/ee/ff/48bde5c0f013094d729fe4b0316ba2a24774b3ff1c52d924a8a4cb04078a/six-1.15.0-py2.py3-none-any.whl\nCollecting zipp<span class=\"token operator\">></span><span class=\"token operator\">=</span><span class=\"token number\">0.5</span> <span class=\"token punctuation\">(</span>from importlib-metadata<span class=\"token operator\">></span><span class=\"token operator\">=</span><span class=\"token number\">0.12</span><span class=\"token punctuation\">;</span> python_version <span class=\"token operator\">&lt;</span> <span class=\"token string\">\"3.8\"</span>-<span class=\"token operator\">></span>virtualenv-<span class=\"token operator\">></span>pipenv<span class=\"token punctuation\">)</span>\n  Downloading https://files.pythonhosted.org/packages/41/ad/6a4f1a124b325618a7fb758b885b68ff7b058eec47d9220a12ab38d90b1f/zipp-3.4.0-py3-none-any.whl\nInstalling collected packages: virtualenv-clone, distlib, filelock, appdirs, zipp, importlib-metadata, six, virtualenv, certifi, pipenv\nSuccessfully installed appdirs-1.4.4 certifi-2020.11.8 distlib-0.3.1 filelock-3.0.12 importlib-metadata-3.1.0 pipenv-2020.11.15 six-1.15.0 virtualenv-20.2.1 virtualenv-clone-0.5.4 zipp-3.4.0\nWARNING: You are using pip version <span class=\"token number\">19.1</span>.1, however version <span class=\"token number\">20.2</span>.4 is available.\nYou should consider upgrading via the <span class=\"token string\">'pip install --upgrade pip'</span> command.\nRemoving intermediate container 1815f94b39e5\n ---<span class=\"token operator\">></span> 30a77dd84cca\nStep <span class=\"token number\">4</span>/7 <span class=\"token builtin class-name\">:</span> COPY Pipfile Pipfile.lock ./\n ---<span class=\"token operator\">></span> b8b33d26d125\nStep <span class=\"token number\">5</span>/7 <span class=\"token builtin class-name\">:</span> RUN pipenv <span class=\"token function\">install</span> --deploy --dev --ignore-pipfile --system\n ---<span class=\"token operator\">></span> Running <span class=\"token keyword\">in</span> 08094d57a642\nInstalling dependencies from Pipfile.lock <span class=\"token punctuation\">(</span>d4ebc7<span class=\"token punctuation\">)</span><span class=\"token punctuation\">..</span>.\nRemoving intermediate container 08094d57a642\n ---<span class=\"token operator\">></span> 078c37fe7625\nStep <span class=\"token number\">6</span>/7 <span class=\"token builtin class-name\">:</span> COPY <span class=\"token builtin class-name\">.</span> <span class=\"token builtin class-name\">.</span>\n ---<span class=\"token operator\">></span> b0cee2af5ffb\n<span class=\"gatsby-highlight-code-line\">Step <span class=\"token number\">7</span>/7 <span class=\"token builtin class-name\">:</span> CMD <span class=\"token punctuation\">[</span><span class=\"token string\">\"python3\"</span>, <span class=\"token string\">\"main.py\"</span><span class=\"token punctuation\">]</span></span><span class=\"gatsby-highlight-code-line\"> ---<span class=\"token operator\">></span> Running <span class=\"token keyword\">in</span> 5435ea2d2f08</span><span class=\"gatsby-highlight-code-line\">Removing intermediate container 5435ea2d2f08</span><span class=\"gatsby-highlight-code-line\"> ---<span class=\"token operator\">></span> 3c2cae465c62</span><span class=\"gatsby-highlight-code-line\">Successfully built 3c2cae465c62</span><span class=\"gatsby-highlight-code-line\">Successfully tagged image_name:latest</span></code></pre>\n              </div>\n            </div>\n          \n<p>Some interesting points to note about this process:</p>\n<ul>\n<li>Docker will execute each command sequentially</li>\n<li>The result of each command will result in a new layer</li>\n<li>Each intermediate layer has a unique id</li>\n<li>Tags are aliases. One image id can have multiple tags. For instance <code>image:1.0.0</code> and <code>image:latest</code></li>\n</ul>\n<p>Docker is pretty clever too. <strong>Docker will cache layers if the build context is not modified</strong>. <strong>If we rerun the build command again, it will finish immediately</strong>. Note that the image ids are identical to the previous run:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-json\"><code class=\"language-json\">$ docker build -t my_image<span class=\"token operator\">:</span>latest .\nSending build context to Docker daemon  <span class=\"token number\">10.24</span>kB\nStep <span class=\"token number\">1</span>/<span class=\"token number\">7</span> <span class=\"token operator\">:</span> FROM python<span class=\"token operator\">:</span><span class=\"token number\">3.7</span>.<span class=\"token number\">3</span>-alpine<span class=\"token number\">3.9</span>\n ---> fe<span class=\"token number\">3</span>ef<span class=\"token number\">29</span>c<span class=\"token number\">73</span>f<span class=\"token number\">3</span>\nStep <span class=\"token number\">2</span>/<span class=\"token number\">7</span> <span class=\"token operator\">:</span> WORKDIR  /app\n ---> Using cache\n ---> <span class=\"token number\">0</span>dd<span class=\"token number\">0597e8</span>d<span class=\"token number\">53</span>\nStep <span class=\"token number\">3</span>/<span class=\"token number\">7</span> <span class=\"token operator\">:</span> RUN pip install pipenv\n ---> Using cache\n ---> <span class=\"token number\">30</span>a<span class=\"token number\">77</span>dd<span class=\"token number\">84</span>cca\nStep <span class=\"token number\">4</span>/<span class=\"token number\">7</span> <span class=\"token operator\">:</span> COPY Pipfile Pipfile.lock ./\n ---> Using cache\n ---> b<span class=\"token number\">8</span>b<span class=\"token number\">33</span>d<span class=\"token number\">26</span>d<span class=\"token number\">125</span>\nStep <span class=\"token number\">5</span>/<span class=\"token number\">7</span> <span class=\"token operator\">:</span> RUN pipenv install --deploy --dev --ignore-pipfile --system\n ---> Using cache\n ---> <span class=\"token number\">078</span>c<span class=\"token number\">37</span>fe<span class=\"token number\">7625</span>\nStep <span class=\"token number\">6</span>/<span class=\"token number\">7</span> <span class=\"token operator\">:</span> COPY . .\n ---> Using cache\n ---> b<span class=\"token number\">0</span>cee<span class=\"token number\">2</span>af<span class=\"token number\">5</span>ffb\nStep <span class=\"token number\">7</span>/<span class=\"token number\">7</span> <span class=\"token operator\">:</span> CMD <span class=\"token punctuation\">[</span><span class=\"token string\">\"python3\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"main.py\"</span><span class=\"token punctuation\">]</span>\n ---> Using cache\n ---> <span class=\"token number\">3</span>c<span class=\"token number\">2</span>cae<span class=\"token number\">465</span>c<span class=\"token number\">62</span>\nSuccessfully built <span class=\"token number\">3</span>c<span class=\"token number\">2</span>cae<span class=\"token number\">465</span>c<span class=\"token number\">62</span>\nSuccessfully tagged my_image<span class=\"token operator\">:</span>latest</code></pre>\n              </div>\n            </div>\n          \n<p>If the docker daemon notices that the build context has changed for a particular layer, the cache is invalidated for that step, as well as subsequent steps. It is for this reason we always copy package dependencies first to ensure expensive package installs are cached.</p>\n<p>We can now run the application, and publish the docker's ports to the host machine:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">$ docker run --rm -p <span class=\"token number\">127.0</span>.0.1:8000:80 my_image:latest\n * Serving Flask app <span class=\"token string\">\"main\"</span> <span class=\"token punctuation\">(</span>lazy loading<span class=\"token punctuation\">)</span>\n * Environment: production\n   WARNING: This is a development server. Do not use it <span class=\"token keyword\">in</span> a production deployment.\n   Use a production WSGI server instead.\n * Debug mode: off\n * Running on http://127.0.0.1:80/ <span class=\"token punctuation\">(</span>Press CTRL+C to quit<span class=\"token punctuation\">)</span></code></pre>\n              </div>\n            </div>\n          \n<p>We can use curl to ensure that everything is working as intended:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">curl</span> http://127.0.0.1:8000\nHello, World<span class=\"token operator\">!</span></code></pre>\n              </div>\n            </div>\n          \n<p>In some scenarios we may notice our build context is far larger than expected.  This is how we can <strong>reduce the files sent to the build context</strong>:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">$ docker build -t docker_ignore_example <span class=\"token builtin class-name\">.</span>\n<span class=\"gatsby-highlight-code-line\">Sending build context to Docker daemon  <span class=\"token number\">395</span>.4MB</span>Step <span class=\"token number\">1</span>/6 <span class=\"token builtin class-name\">:</span> FROM node:10.9-alpine\n ---<span class=\"token operator\">></span> df2d34f007a1\n<span class=\"token punctuation\">..</span>.</code></pre>\n              </div>\n            </div>\n          \n<p>This can be achieved with <strong><code>.dockerignore</code></strong> file:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">cat</span> .dockerignore\n<span class=\"token comment\"># Ignore all files by default</span>\n*\n\n<span class=\"token comment\"># Allow only the required files</span>\n<span class=\"token operator\">!</span>public/\n<span class=\"token operator\">!</span>src/\n<span class=\"token operator\">!</span>config-overrides.js\n<span class=\"token operator\">!</span>package.json\n<span class=\"token operator\">!</span>yarn.lock</code></pre>\n              </div>\n            </div>\n          \n<p>Now we can see that the build context has been dramatically reduced in size:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">$ docker build -t docker_ignore_example <span class=\"token builtin class-name\">.</span>\n<span class=\"gatsby-highlight-code-line\">Sending build context to Docker daemon  <span class=\"token number\">313</span>.9kB</span>Step <span class=\"token number\">1</span>/6 <span class=\"token builtin class-name\">:</span> FROM node:10.9-alpine\n ---<span class=\"token operator\">></span> df2d34f007a1\n<span class=\"token punctuation\">..</span>.</code></pre>\n              </div>\n            </div>\n          \n<p>This simple change will:</p>\n<ul>\n<li>Reduce build speeds. Creating the build context can be slow</li>\n<li>Reduce the chance of cache invalidation</li>\n<li>Ensure the final image doesn't contain contain sensitive files such as <code>.git</code>, <code>.env</code>, etc.</li>\n</ul>\n<p>Earlier it was mentioned that each step within a Dockerfile will become a layer. These layers combine will produce the final runnable image. These layers can be downloaded separately, and in parallel. Note that if you have previous layers already, they won't be downloaded again:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-powershell\"><code class=\"language-powershell\">docker pull ruby:2<span class=\"token punctuation\">.</span>5\nUnable to find image <span class=\"token string\">'ruby:2.5'</span> locally\n2<span class=\"token punctuation\">.</span>5: Pulling <span class=\"token keyword\">from</span> library<span class=\"token operator\">/</span>ruby\n756975cb9c7e: Pull complete\nd77915b4e630: Pull complete\n5f37a0a41b6b: Pull complete\n96b2c1e36db5: Pull complete\nc495e8de12d2: Downloading <span class=\"token punctuation\">[</span>====================>                              <span class=\"token punctuation\">]</span>  78<span class=\"token punctuation\">.</span>82MB<span class=\"token operator\">/</span>192<span class=\"token punctuation\">.</span>3MB\n49d50a24de5f: Download complete\n9a2ce94cdbc3: Downloading <span class=\"token punctuation\">[</span>===================================>               <span class=\"token punctuation\">]</span>  15<span class=\"token punctuation\">.</span>87MB<span class=\"token operator\">/</span>22<span class=\"token punctuation\">.</span>52MB\n9b0b42fb87d9: Download complete</code></pre>\n              </div>\n            </div>\n          \n<p>Likewise <strong>tags are just aliases</strong>:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">$ docker tag\n<span class=\"token string\">\"docker tag\"</span> requires exactly <span class=\"token number\">2</span> arguments.\nSee <span class=\"token string\">'docker tag --help'</span><span class=\"token builtin class-name\">.</span>\n\nUsage:  docker tag SOURCE_IMAGE<span class=\"token punctuation\">[</span>:TAG<span class=\"token punctuation\">]</span> TARGET_IMAGE<span class=\"token punctuation\">[</span>:TAG<span class=\"token punctuation\">]</span>\n\nCreate a tag TARGET_IMAGE that refers to SOURCE_IMAGE</code></pre>\n              </div>\n            </div>\n          \n<p>You can view every layer with the <code>docker history</code> command:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">$ docker <span class=\"token function\">history</span> my_image\nIMAGE               CREATED             CREATED BY                                      SIZE                COMMENT\n72938d6b403c        <span class=\"token number\">17</span> hours ago        /bin/sh -c <span class=\"token comment\">#(nop)  CMD [\"python3\" \"main.py\"]    0B</span>\n74533d6b0fb2        <span class=\"token number\">17</span> hours ago        /bin/sh -c <span class=\"token comment\">#(nop) COPY dir:fff6578bafd7bd497…   6.05kB</span>\n226a426e62ac        <span class=\"token number\">17</span> hours ago        /bin/sh -c pipenv <span class=\"token function\">install</span> --deploy --dev --i…   <span class=\"token number\">5</span>.49MB\n915660a9cf93        <span class=\"token number\">17</span> hours ago        /bin/sh -c <span class=\"token comment\">#(nop) COPY multi:03c61ef0e8a7669…   5.68kB</span>\na7822573f57e        <span class=\"token number\">18</span> hours ago        /bin/sh -c pip <span class=\"token function\">install</span> pipenv                   43MB\n357900f7d29a        <span class=\"token number\">18</span> hours ago        /bin/sh -c <span class=\"token comment\">#(nop) WORKDIR /app                  0B</span>\nfe3ef29c73f3        <span class=\"token number\">19</span> months ago       /bin/sh -c <span class=\"token comment\">#(nop)  CMD [\"python3\"]              0B</span>\n<span class=\"token operator\">&lt;</span>missing<span class=\"token operator\">></span>           <span class=\"token number\">19</span> months ago       /bin/sh -c <span class=\"token builtin class-name\">set</span> -ex<span class=\"token punctuation\">;</span>   <span class=\"token function\">wget</span> -O get-pip.py 'ht…   <span class=\"token number\">6</span>.06MB\n<span class=\"token operator\">&lt;</span>missing<span class=\"token operator\">></span>           <span class=\"token number\">19</span> months ago       /bin/sh -c <span class=\"token comment\">#(nop)  ENV PYTHON_PIP_VERSION=19…   0B</span>\n<span class=\"token operator\">&lt;</span>missing<span class=\"token operator\">></span>           <span class=\"token number\">19</span> months ago       /bin/sh -c <span class=\"token builtin class-name\">cd</span> /usr/local/bin  <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">ln</span> -s idle3…   32B\n<span class=\"token operator\">&lt;</span>missing<span class=\"token operator\">></span>           <span class=\"token number\">19</span> months ago       /bin/sh -c <span class=\"token builtin class-name\">set</span> -ex  <span class=\"token operator\">&amp;&amp;</span> apk <span class=\"token function\">add</span> --no-cache --…   <span class=\"token number\">74</span>.8MB\n<span class=\"token operator\">&lt;</span>missing<span class=\"token operator\">></span>           <span class=\"token number\">19</span> months ago       /bin/sh -c <span class=\"token comment\">#(nop)  ENV PYTHON_VERSION=3.7.3     0B</span>\n<span class=\"token operator\">&lt;</span>missing<span class=\"token operator\">></span>           <span class=\"token number\">19</span> months ago       /bin/sh -c <span class=\"token comment\">#(nop)  ENV GPG_KEY=0D96DF4D4110E…   0B</span>\n<span class=\"token operator\">&lt;</span>missing<span class=\"token operator\">></span>           <span class=\"token number\">19</span> months ago       /bin/sh -c apk <span class=\"token function\">add</span> --no-cache ca-certificates   551kB\n<span class=\"token operator\">&lt;</span>missing<span class=\"token operator\">></span>           <span class=\"token number\">19</span> months ago       /bin/sh -c <span class=\"token comment\">#(nop)  ENV LANG=C.UTF-8             0B</span>\n<span class=\"token operator\">&lt;</span>missing<span class=\"token operator\">></span>           <span class=\"token number\">19</span> months ago       /bin/sh -c <span class=\"token comment\">#(nop)  ENV PATH=/usr/local/bin:/…   0B</span>\n<span class=\"token operator\">&lt;</span>missing<span class=\"token operator\">></span>           <span class=\"token number\">19</span> months ago       /bin/sh -c <span class=\"token comment\">#(nop)  CMD [\"/bin/sh\"]              0B</span>\n<span class=\"token operator\">&lt;</span>missing<span class=\"token operator\">></span>           <span class=\"token number\">19</span> months ago       /bin/sh -c <span class=\"token comment\">#(nop) ADD file:a86aea1f3a7d68f6a…   5.53MB</span>\n\n<span class=\"token comment\"># Without truncation</span>\n$ docker <span class=\"token function\">history</span> nginx --no-trunc\n<span class=\"token punctuation\">..</span>.</code></pre>\n              </div>\n            </div>\n          \n<h2 id=\"debugging-docker\" style=\"position:relative;\"><a href=\"#debugging-docker\" aria-label=\"debugging docker permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Debugging Docker</h2>\n<h3 id=\"debugging-broken-image-builds\" style=\"position:relative;\"><a href=\"#debugging-broken-image-builds\" aria-label=\"debugging broken image builds permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Debugging broken image builds</h3>\n<p>Let's say we had the following docker build break:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"gatsby-highlight-code-line\">$ docker build -t my_image:latest <span class=\"token builtin class-name\">.</span></span>Sending build context to Docker daemon  <span class=\"token number\">9</span>.728kB\nStep <span class=\"token number\">1</span>/7 <span class=\"token builtin class-name\">:</span> FROM python:3.7.3-alpine3.9\n ---<span class=\"token operator\">></span> fe3ef29c73f3\nStep <span class=\"token number\">2</span>/7 <span class=\"token builtin class-name\">:</span> WORKDIR  /app\n ---<span class=\"token operator\">></span> Using cache\n ---<span class=\"token operator\">></span> 0dd0597e8d53\nStep <span class=\"token number\">3</span>/7 <span class=\"token builtin class-name\">:</span> RUN pip <span class=\"token function\">install</span> pipenv\n ---<span class=\"token operator\">></span> Using cache\n ---<span class=\"token operator\">></span> 30a77dd84cca\nStep <span class=\"token number\">4</span>/7 <span class=\"token builtin class-name\">:</span> COPY Pipfile Pipfile.lock ./\n ---<span class=\"token operator\">></span> 15d2fbf43c6c\n<span class=\"gatsby-highlight-code-line\">Step <span class=\"token number\">5</span>/7 <span class=\"token builtin class-name\">:</span> RUN pipenv <span class=\"token function\">install</span> --deploy --dev --ignore-pipfile --system</span><span class=\"gatsby-highlight-code-line\"> ---<span class=\"token operator\">></span> Running <span class=\"token keyword\">in</span> 32a28be440a6</span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">[</span>PipenvOptionsError<span class=\"token punctuation\">]</span>:   File <span class=\"token string\">\"/usr/local/lib/python3.7/site-packages/pipenv/vendor/click/core.py\"</span>, line <span class=\"token number\">610</span>, <span class=\"token keyword\">in</span> invoke</span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">[</span>PipenvOptionsError<span class=\"token punctuation\">]</span>:       <span class=\"token builtin class-name\">return</span> callback<span class=\"token punctuation\">(</span>*args, **kwargs<span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">[</span>PipenvOptionsError<span class=\"token punctuation\">]</span>:   File <span class=\"token string\">\"/usr/local/lib/python3.7/site-packages/pipenv/vendor/click/decorators.py\"</span>, line <span class=\"token number\">21</span>, <span class=\"token keyword\">in</span> new_func</span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">[</span>PipenvOptionsError<span class=\"token punctuation\">]</span>:       <span class=\"token builtin class-name\">return</span> f<span class=\"token punctuation\">(</span>get_current_context<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>, *args, **kwargs<span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">[</span>PipenvOptionsError<span class=\"token punctuation\">]</span>:   File <span class=\"token string\">\"/usr/local/lib/python3.7/site-packages/pipenv/cli/command.py\"</span>, line <span class=\"token number\">253</span>, <span class=\"token keyword\">in</span> <span class=\"token function\">install</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">[</span>PipenvOptionsError<span class=\"token punctuation\">]</span>:       <span class=\"token assign-left variable\">site_packages</span><span class=\"token operator\">=</span>state.site_packages</span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">[</span>PipenvOptionsError<span class=\"token punctuation\">]</span>:   File <span class=\"token string\">\"/usr/local/lib/python3.7/site-packages/pipenv/core.py\"</span>, line <span class=\"token number\">1928</span>, <span class=\"token keyword\">in</span> do_install</span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">[</span>PipenvOptionsError<span class=\"token punctuation\">]</span>:       <span class=\"token assign-left variable\">site_packages</span><span class=\"token operator\">=</span>site_packages,</span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">[</span>PipenvOptionsError<span class=\"token punctuation\">]</span>:   File <span class=\"token string\">\"/usr/local/lib/python3.7/site-packages/pipenv/core.py\"</span>, line <span class=\"token number\">615</span>, <span class=\"token keyword\">in</span> ensure_project</span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">[</span>PipenvOptionsError<span class=\"token punctuation\">]</span>:       <span class=\"token assign-left variable\">validate</span><span class=\"token operator\">=</span>validate, <span class=\"token assign-left variable\">skip_requirements</span><span class=\"token operator\">=</span>skip_requirements, <span class=\"token assign-left variable\">system</span><span class=\"token operator\">=</span>system</span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">[</span>PipenvOptionsError<span class=\"token punctuation\">]</span>:   File <span class=\"token string\">\"/usr/local/lib/python3.7/site-packages/pipenv/core.py\"</span>, line <span class=\"token number\">282</span>, <span class=\"token keyword\">in</span> ensure_pipfile</span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">[</span>PipenvOptionsError<span class=\"token punctuation\">]</span>:       \"--system is intended to be used <span class=\"token keyword\">for</span> pre-existing Pipfile</span><span class=\"gatsby-highlight-code-line\">ERROR:: --system is intended to be used <span class=\"token keyword\">for</span> pre-existing Pipfile installation, not installation of specific packages. Aborting.</span><span class=\"gatsby-highlight-code-line\">The <span class=\"token builtin class-name\">command</span> <span class=\"token string\">'/bin/sh -c pipenv install --deploy --dev --ignore-pipfile --system'</span> returned a non-zero code: <span class=\"token number\">1</span></span></code></pre>\n              </div>\n            </div>\n          \n<p><strong>Each intermediate docker stage has a unique id</strong> that can be used to run commands against arbitrary intermediate stages of a docker build. This is great for debugging broken builds. <strong>We can run the step prior to failure within an interactive shell</strong> and investigate further:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># The build failed. Let's use the previous image id:</span>\n$ docker build -t my_image:latest <span class=\"token builtin class-name\">.</span>\nSending build context to Docker daemon  <span class=\"token number\">9</span>.728kB\n<span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span>\n<span class=\"gatsby-highlight-code-line\">Step <span class=\"token number\">4</span>/7 <span class=\"token builtin class-name\">:</span> COPY Pipfile Pipfile.lock ./</span><span class=\"gatsby-highlight-code-line\"> ---<span class=\"token operator\">></span> 15d2fbf43c6c <span class=\"token operator\">&lt;</span>- The unique <span class=\"token function\">id</span></span><span class=\"gatsby-highlight-code-line\">Step <span class=\"token number\">5</span>/7 <span class=\"token builtin class-name\">:</span> RUN pipenv <span class=\"token function\">install</span> --deploy --dev --ignore-pipfile --system</span><span class=\"gatsby-highlight-code-line\"> ---<span class=\"token operator\">></span> Running <span class=\"token keyword\">in</span> 32a28be440a6</span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">[</span> Omitted <span class=\"token punctuation\">]</span></span><span class=\"gatsby-highlight-code-line\">The <span class=\"token builtin class-name\">command</span> <span class=\"token string\">'/bin/sh -c pipenv install --deploy --dev --ignore-pipfile --system'</span> returned a non-zero code: <span class=\"token number\">1</span></span>\n<span class=\"token comment\"># Run a new command against the intermediate step. Note that alpine doesn't have `/bin/bash`:</span>\n$ docker run --rm -it 15d2fbf43c6c /bin/sh\n/app <span class=\"token comment\"># ls</span>\nPipfile       Pipfile.lock\n/app <span class=\"token comment\"># cat Pipfile</span>\n\n/app <span class=\"token comment\"># du -h Pipfile</span>\n<span class=\"token number\">0</span>       Pipfile\n/app <span class=\"token comment\">#</span></code></pre>\n              </div>\n            </div>\n          \n<h3 id=\"debugging-broken-containers\" style=\"position:relative;\"><a href=\"#debugging-broken-containers\" aria-label=\"debugging broken containers permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Debugging broken containers</h3>\n<p>If you're having problems with an already running docker container and you're not sure what's going wrong, you can use <code>exec</code> to run an arbitrary command against a currently running container. This works in a similar way to <code>docker run</code>:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">docker <span class=\"token builtin class-name\">exec</span> --help\n\nUsage:\tdocker <span class=\"token builtin class-name\">exec</span> <span class=\"token punctuation\">[</span>OPTIONS<span class=\"token punctuation\">]</span> CONTAINER COMMAND <span class=\"token punctuation\">[</span>ARG<span class=\"token punctuation\">..</span>.<span class=\"token punctuation\">]</span>\n\nRun a <span class=\"token builtin class-name\">command</span> <span class=\"token keyword\">in</span> a running container</code></pre>\n              </div>\n            </div>\n          \n<p>For instance:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Run an arbitrary container</span>\n$ docker run --rm -p <span class=\"token number\">127.0</span>.0.1:8080:80 -it nginx /bin/bash\n\n<span class=\"token comment\"># View the running containers to see the container id (Same as `docker container ls`)</span>\n$ docker <span class=\"token function\">ps</span>\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES\n223129cea261        nginx               <span class=\"token string\">\"/docker-entrypoint.…\"</span>   <span class=\"token number\">6</span> minutes ago       Up <span class=\"token number\">6</span> minutes        <span class=\"token number\">127.0</span>.0.1:8080-<span class=\"token operator\">></span><span class=\"token number\">80</span>/tcp   bold_wilbur\n\n<span class=\"token comment\"># exec an interactive tty against an existing container</span>\n$ docker <span class=\"token builtin class-name\">exec</span> -it 223129cea261 /bin/bash\nroot@223129cea261:/<span class=\"token comment\"># echo $(whoami; id; hostname)</span>\nroot <span class=\"token assign-left variable\">uid</span><span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">)</span> <span class=\"token assign-left variable\">gid</span><span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">)</span> <span class=\"token assign-left variable\">groups</span><span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">)</span> 223129cea261</code></pre>\n              </div>\n            </div>\n          \n<p><strong>You can also name docker containers</strong> to achieve the same effect:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Run an arbitrary container with a name</span>\n$ docker run --name my_nginx_container --rm -p <span class=\"token number\">127.0</span>.0.1:8080:80 nginx\n\n<span class=\"token comment\"># exec an interactive tty</span>\n$ docker <span class=\"token builtin class-name\">exec</span> -it my_nginx_container /bin/bash\nroot@223129cea261:/<span class=\"token comment\"># echo \"hello from inside the container\"</span>\nhello from inside the container</code></pre>\n              </div>\n            </div>\n          \n<h3 id=\"debugging-detached-containers\" style=\"position:relative;\"><a href=\"#debugging-detached-containers\" aria-label=\"debugging detached containers permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Debugging detached containers</h3>\n<p>By default when you run a container it will run in the foreground of your terminal. However, it is also possible the process in the background using detached mode:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># -d, --detach  Run container in background and print container ID</span>\n\n$ docker run -d --rm -p <span class=\"token number\">127.0</span>.0.1:8080:80 nginx\n30022d51e37ccef2e9a9fd042a408d2697a8f8eefa61c437a298e4ae9eff8f68</code></pre>\n              </div>\n            </div>\n          \n<p>It is possible to view the logs of any container, whether attached or not, with <code>docker logs</code>:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">docker logs --help\n\nUsage:\tdocker logs <span class=\"token punctuation\">[</span>OPTIONS<span class=\"token punctuation\">]</span> CONTAINER\n\nFetch the logs of a container</code></pre>\n              </div>\n            </div>\n          \n<p>For example:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">$ docker logs --follow 30022d51e37ccef2e9a9fd042a408d2697a8f8eefa61c437a298e4ae9eff8f68 --since 5m\n<span class=\"token number\">172.17</span>.0.1 - - <span class=\"token punctuation\">[</span><span class=\"token number\">28</span>/Nov/2020:01:35:38 +0000<span class=\"token punctuation\">]</span> <span class=\"token string\">\"GET / HTTP/1.1\"</span> <span class=\"token number\">304</span> <span class=\"token number\">0</span> <span class=\"token string\">\"-\"</span> <span class=\"token string\">\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:83.0) Gecko/20100101 Firefox/83.0\"</span> <span class=\"token string\">\"-\"</span>\n<span class=\"token number\">172.17</span>.0.1 - - <span class=\"token punctuation\">[</span><span class=\"token number\">28</span>/Nov/2020:01:35:38 +0000<span class=\"token punctuation\">]</span> <span class=\"token string\">\"GET / HTTP/1.1\"</span> <span class=\"token number\">304</span> <span class=\"token number\">0</span> <span class=\"token string\">\"-\"</span> <span class=\"token string\">\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:83.0) Gecko/20100101 Firefox/83.0\"</span> <span class=\"token string\">\"-\"</span>\n<span class=\"token number\">172.17</span>.0.1 - - <span class=\"token punctuation\">[</span><span class=\"token number\">28</span>/Nov/2020:01:35:38 +0000<span class=\"token punctuation\">]</span> <span class=\"token string\">\"GET / HTTP/1.1\"</span> <span class=\"token number\">304</span> <span class=\"token number\">0</span> <span class=\"token string\">\"-\"</span> <span class=\"token string\">\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:83.0) Gecko/20100101 Firefox/83.0\"</span> <span class=\"token string\">\"-\"</span>\n<span class=\"token number\">172.17</span>.0.1 - - <span class=\"token punctuation\">[</span><span class=\"token number\">28</span>/Nov/2020:01:35:38 +0000<span class=\"token punctuation\">]</span> <span class=\"token string\">\"GET / HTTP/1.1\"</span> <span class=\"token number\">304</span> <span class=\"token number\">0</span> <span class=\"token string\">\"-\"</span> <span class=\"token string\">\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:83.0) Gecko/20100101 Firefox/83.0\"</span> <span class=\"token string\">\"-\"</span></code></pre>\n              </div>\n            </div>\n          \n<p>The <code>attach</code> command can also be useful to attach to the previously detached docker container. Although even in this scenario I would more frequently use <code>exec</code>:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">$ docker attach --help\n\nUsage:\tdocker attach <span class=\"token punctuation\">[</span>OPTIONS<span class=\"token punctuation\">]</span> CONTAINER\n\nAttach <span class=\"token builtin class-name\">local</span> standard input, output, and error streams to a running container</code></pre>\n              </div>\n            </div>\n          \n<p>If you're trying to debug locally, rather than on production, the final trick is to <strong>remove the -d flag, and view the error synchronously</strong>.</p>\n<h2 id=\"docker-as-build-environment\" style=\"position:relative;\"><a href=\"#docker-as-build-environment\" aria-label=\"docker as build environment permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Docker as build environment</h2>\n<p>Docker is great for running stand alone, portable, applications and software. It can be used to create images for building/compiling software in your CI environments, or for local development purposes.</p>\n<h3 id=\"cross-compiler-example\" style=\"position:relative;\"><a href=\"#cross-compiler-example\" aria-label=\"cross compiler example permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cross Compiler example</h3>\n<p>Let's say I wanted to cross compile software for a different architecture than my host machine. Setting up cross-compilers on your own machine can be complicated. Instead we can create an replicable build environment using Docker. This was the approach that I took as part of developing my <a href=\"https://github.com/AlanFoster/os_concepts\">os_concepts project</a>. Let's create a simple Dockerfile for this:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">FROM ubuntu:20.04\n\n<span class=\"token comment\"># Install the required software</span>\nRUN <span class=\"token function\">apt</span> update <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">\\</span>\n    <span class=\"token assign-left variable\">DEBIAN_FRONTEND</span><span class=\"token operator\">=</span>noninteractive <span class=\"token function\">apt</span> <span class=\"token function\">install</span> -y <span class=\"token punctuation\">\\</span>\n        build-essential <span class=\"token punctuation\">\\</span>\n        <span class=\"token function\">curl</span> <span class=\"token punctuation\">\\</span>\n        libgmp3-dev <span class=\"token punctuation\">\\</span>\n        libmpc-dev <span class=\"token punctuation\">\\</span>\n        libmpfr-dev <span class=\"token punctuation\">\\</span>\n        nasm <span class=\"token punctuation\">\\</span>\n        texinfo <span class=\"token punctuation\">\\</span>\n        qemu-system-i386 <span class=\"token punctuation\">\\</span>\n        python3 <span class=\"token punctuation\">\\</span>\n        python3-dev <span class=\"token punctuation\">\\</span>\n        python3-distutils <span class=\"token punctuation\">\\</span>\n        <span class=\"token function\">git</span>\n\n<span class=\"token comment\"># Copy standalone script for installing cross compilers</span>\nCOPY ./install_crosscompiler.sh ./\nRUN ./install_crosscompiler.sh all\n\n<span class=\"token comment\"># Add the cross compiler to the path, to ensure 'i386-elf-gcc' is now available</span>\nENV <span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span><span class=\"token string\">\"~/opt/cross/bin:<span class=\"token variable\">${<span class=\"token environment constant\">PATH</span>}</span>\"</span>\n\n<span class=\"token comment\"># Installing other useful tools</span>\nRUN <span class=\"token function\">git</span> clone https://github.com/pwndbg/pwndbg <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">\\</span>\n    <span class=\"token builtin class-name\">cd</span> pwndbg <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">\\</span>\n    ./setup.sh</code></pre>\n              </div>\n            </div>\n          \n<p>The docker image can be built as normal:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">$ docker build -t osbuilder <span class=\"token builtin class-name\">.</span>\n<span class=\"token punctuation\">..</span>. Many minutes later<span class=\"token punctuation\">..</span>.</code></pre>\n              </div>\n            </div>\n          \n<p>Now we can run the container as normal. However, we will <strong>use Docker's volumes to ensure that our source files are available on Docker's file system</strong>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8fe9b3a9b2ffa1bca20938edd0cbcfa0/f431c/docker-volumes.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.3640350877193%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABOklEQVQoz12SiarCQAxF5/+/qyCCoFTqgpa21n3tYtXicuUERh5vIJ0lM7knSV1VVWqaRmVZqigKnU4nnc9n7XY74avrWrfbTX7MZjMNBgOlaaokSdTv99XtdhUEgZbLpdz9freL6/Vao9FIURSp0+mo1+upbVvzIfj5fPR+v00IAwDhw+Fg++12azDucrn8KCBiZo/Q9Xq1My+KAL7H4/HzI+aNWG6/35sSZBDO53NlWabpdGprlKEgyPF4tD3+8XisOI41HA4tfe5TMscH/M1mYzXI89werVYrCwQx6gyC+npSgv8Dakf+KDNTA4hZE8zXhbSfz6elCwA+xPEDgDgzmTqcPCDlyWRi6GEYWgdJi0sEhcxnguhisTAQmskZZk3hg/lOcZnZdxOiv78NpBgdf71eZv6MknwBOTtaSvdwUtQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"docker-volumes.png\"\n        title=\"docker-volumes.png\"\n        src=\"/static/8fe9b3a9b2ffa1bca20938edd0cbcfa0/dc2fe/docker-volumes.png\"\n        srcset=\"/static/8fe9b3a9b2ffa1bca20938edd0cbcfa0/fc8b9/docker-volumes.png 163w,\n/static/8fe9b3a9b2ffa1bca20938edd0cbcfa0/d53b1/docker-volumes.png 325w,\n/static/8fe9b3a9b2ffa1bca20938edd0cbcfa0/dc2fe/docker-volumes.png 650w,\n/static/8fe9b3a9b2ffa1bca20938edd0cbcfa0/f431c/docker-volumes.png 912w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>In this example the volume and working directory are additionally specified:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Run the osbuilder image, and specify the volume and working directory</span>\n$ docker run --rm -it -v <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token builtin class-name\">pwd</span><span class=\"token variable\">)</span></span><span class=\"token builtin class-name\">:</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token builtin class-name\">pwd</span><span class=\"token variable\">)</span></span> -w <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token builtin class-name\">pwd</span><span class=\"token variable\">)</span></span> osbuilder /bin/bash\nroot@c37f7fde3908:/Users/alan/Documents/code/os_concepts<span class=\"token comment\"># make</span>\n<span class=\"token punctuation\">..</span>. generating object files etc <span class=\"token punctuation\">..</span>.\n<span class=\"token punctuation\">..</span>. generating the final compiled assets<span class=\"token punctuation\">..</span>.\n\nroot@c37f7fde3908:/Users/alan/Documents/code/os_concepts<span class=\"token comment\">#</span></code></pre>\n              </div>\n            </div>\n          \n<p><strong>Any modifications to files, or newly created files, will be available on the host</strong>. Now the compiled assets are available on the host machine:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">du</span> -h os.img\n 20K\tos.img</code></pre>\n              </div>\n            </div>\n          \n<p>Note that on a CI environment, you may preference using like <strong><code>docker cp</code></strong> instead:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">$ docker <span class=\"token function\">cp</span> --help\n\nUsage:\tdocker <span class=\"token function\">cp</span> <span class=\"token punctuation\">[</span>OPTIONS<span class=\"token punctuation\">]</span> CONTAINER:SRC_PATH DEST_PATH<span class=\"token operator\">|</span>-\n\tdocker <span class=\"token function\">cp</span> <span class=\"token punctuation\">[</span>OPTIONS<span class=\"token punctuation\">]</span> SRC_PATH<span class=\"token operator\">|</span>- CONTAINER:DEST_PATH\n\nCopy files/folders between a container and the <span class=\"token builtin class-name\">local</span> filesystem</code></pre>\n              </div>\n            </div>\n          \n<h2 id=\"simple-networking\" style=\"position:relative;\"><a href=\"#simple-networking\" aria-label=\"simple networking permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Simple networking</h2>\n<h3 id=\"port-mapping\" style=\"position:relative;\"><a href=\"#port-mapping\" aria-label=\"port mapping permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Port Mapping</h3>\n<p>We've seen this already:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">docker run --rm --publish <span class=\"token number\">127.0</span>.0.1:8080:80\tnginx</code></pre>\n              </div>\n            </div>\n          \n<h3 id=\"linux\" style=\"position:relative;\"><a href=\"#linux\" aria-label=\"linux permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Linux</h3>\n<p>On Linux there is a <strong>docker0 bridge network adapter</strong> available.</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">ip</span> a\n<span class=\"token number\">1</span>: lo: <span class=\"token operator\">&lt;</span>LOOPBACK,UP,LOWER_UP<span class=\"token operator\">></span> mtu <span class=\"token number\">65536</span> qdisc noqueue state UNKNOWN group default qlen <span class=\"token number\">1000</span>\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet <span class=\"token number\">127.0</span>.0.1/8 scope <span class=\"token function\">host</span> lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope <span class=\"token function\">host</span>\n       valid_lft forever preferred_lft forever\n<span class=\"token number\">2</span>: eth0: <span class=\"token operator\">&lt;</span>BROADCAST,MULTICAST,UP,LOWER_UP<span class=\"token operator\">></span> mtu <span class=\"token number\">1500</span> qdisc pfifo_fast state UP group default qlen <span class=\"token number\">1000</span>\n    link/ether 00:0c:29:71:6c:1e brd ff:ff:ff:ff:ff:ff\n    inet <span class=\"token number\">192.168</span>.246.234/24 brd <span class=\"token number\">192.168</span>.246.255 scope global dynamic noprefixroute eth0\n       valid_lft 1305sec preferred_lft 1305sec\n    inet6 fe80::20c:29ff:fe71:6c1e/64 scope <span class=\"token function\">link</span> noprefixroute\n       valid_lft forever preferred_lft forever\n<span class=\"gatsby-highlight-code-line\"><span class=\"token number\">3</span>: docker0: <span class=\"token operator\">&lt;</span>NO-CARRIER,BROADCAST,MULTICAST,UP<span class=\"token operator\">></span> mtu <span class=\"token number\">1500</span> qdisc noqueue state DOWN group default</span><span class=\"gatsby-highlight-code-line\">    link/ether 02:42:1b:3a:a0:58 brd ff:ff:ff:ff:ff:ff</span><span class=\"gatsby-highlight-code-line\">    inet <span class=\"token number\">172.17</span>.0.1/16 brd <span class=\"token number\">172.17</span>.255.255 scope global docker0</span><span class=\"gatsby-highlight-code-line\">       valid_lft forever preferred_lft forever</span><span class=\"token number\">4</span>: br-b43f932cc92f: <span class=\"token operator\">&lt;</span>NO-CARRIER,BROADCAST,MULTICAST,UP<span class=\"token operator\">></span> mtu <span class=\"token number\">1500</span> qdisc noqueue state DOWN group default\n    link/ether 02:42:8e:30:ee:4b brd ff:ff:ff:ff:ff:ff\n    inet <span class=\"token number\">172.18</span>.0.1/16 brd <span class=\"token number\">172.18</span>.255.255 scope global br-b43f932cc92f\n       valid_lft forever preferred_lft forever</code></pre>\n              </div>\n            </div>\n          \n<p>We can view the available docker networks:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">$ docker network <span class=\"token function\">ls</span>\nNETWORK ID          NAME                   DRIVER              SCOPE\n2937a473cc07        bridge                 bridge              <span class=\"token builtin class-name\">local</span>\n1fb029dabed9        <span class=\"token function\">host</span>                   <span class=\"token function\">host</span>                <span class=\"token builtin class-name\">local</span>\nc72689d423c5        none                   null                <span class=\"token builtin class-name\">local</span></code></pre>\n              </div>\n            </div>\n          \n<p>We can inspect the network to see the configuration, and what containers are present:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">$ docker network inspect bridge\ndocker network inspect bridge\n<span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token string\">\"Name\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"bridge\"</span>,</span>        <span class=\"token string\">\"Id\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"2937a473cc0778888e4e17dd18bb29b7535f81e9936a3960c176239a02a5b87f\"</span>,\n        <span class=\"token string\">\"Created\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"2020-11-30T21:25:26.036494464-05:00\"</span>,\n        <span class=\"token string\">\"Scope\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"local\"</span>,\n        <span class=\"token string\">\"Driver\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"bridge\"</span>,\n        <span class=\"token string\">\"EnableIPv6\"</span><span class=\"token builtin class-name\">:</span> false,\n        <span class=\"token string\">\"IPAM\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"Driver\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"default\"</span>,\n            <span class=\"token string\">\"Options\"</span><span class=\"token builtin class-name\">:</span> null,\n<span class=\"gatsby-highlight-code-line\">            <span class=\"token string\">\"Config\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span></span><span class=\"gatsby-highlight-code-line\">                <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">                    <span class=\"token string\">\"Subnet\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"172.17.0.0/16\"</span>,</span><span class=\"gatsby-highlight-code-line\">                    <span class=\"token string\">\"Gateway\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"172.17.0.1\"</span></span><span class=\"gatsby-highlight-code-line\">                <span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token punctuation\">]</span></span>        <span class=\"token punctuation\">}</span>,\n        <span class=\"token string\">\"Internal\"</span><span class=\"token builtin class-name\">:</span> false,\n        <span class=\"token string\">\"Attachable\"</span><span class=\"token builtin class-name\">:</span> false,\n        <span class=\"token string\">\"Ingress\"</span><span class=\"token builtin class-name\">:</span> false,\n        <span class=\"token string\">\"ConfigFrom\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"Network\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"\"</span>\n        <span class=\"token punctuation\">}</span>,\n        <span class=\"token string\">\"ConfigOnly\"</span><span class=\"token builtin class-name\">:</span> false,\n        <span class=\"token string\">\"Containers\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"51a56a5043ea6550be28b6fe31c64bde1db0f51c396f6f1ae09feb904ceba65a\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">                <span class=\"token string\">\"Name\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"zen_shamir\"</span>,</span><span class=\"gatsby-highlight-code-line\">                <span class=\"token string\">\"EndpointID\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"53d782e9bef4c300e056d11ba9bc058daafdc9ee42698678b7dc0e7b08d242e7\"</span>,</span><span class=\"gatsby-highlight-code-line\">                <span class=\"token string\">\"MacAddress\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"02:42:ac:11:00:02\"</span>,</span><span class=\"gatsby-highlight-code-line\">                <span class=\"token string\">\"IPv4Address\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"172.17.0.2/16\"</span>,</span><span class=\"gatsby-highlight-code-line\">                <span class=\"token string\">\"IPv6Address\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"\"</span></span>            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>,\n        <span class=\"token string\">\"Options\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"com.docker.network.bridge.default_bridge\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"true\"</span>,\n            <span class=\"token string\">\"com.docker.network.bridge.enable_icc\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"true\"</span>,\n            <span class=\"token string\">\"com.docker.network.bridge.enable_ip_masquerade\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"true\"</span>,\n            <span class=\"token string\">\"com.docker.network.bridge.host_binding_ipv4\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"0.0.0.0\"</span>,\n<span class=\"gatsby-highlight-code-line\">            <span class=\"token string\">\"com.docker.network.bridge.name\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"docker0\"</span>,</span>            <span class=\"token string\">\"com.docker.network.driver.mtu\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"1500\"</span>\n        <span class=\"token punctuation\">}</span>,\n        <span class=\"token string\">\"Labels\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre>\n              </div>\n            </div>\n          \n<p>Let's run a simple Python web server:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Run a Python container</span>\n$ docker run -it --rm -v <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token builtin class-name\">pwd</span><span class=\"token variable\">)</span></span><span class=\"token builtin class-name\">:</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token builtin class-name\">pwd</span><span class=\"token variable\">)</span></span> -w <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token builtin class-name\">pwd</span><span class=\"token variable\">)</span></span> -p <span class=\"token number\">8000</span>:8000 python:3.7 /bin/bash\n\n<span class=\"token comment\"># Run a simple web server:</span>\nroot@91b3d7db6852:/tmp/example<span class=\"token comment\"># python3 -m http.server</span>\nServing HTTP on <span class=\"token number\">0.0</span>.0.0 port <span class=\"token number\">8000</span> <span class=\"token punctuation\">(</span>http://0.0.0.0:8000/<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.</code></pre>\n              </div>\n            </div>\n          \n<p>If we curl from the host to the bound port, either on it's IP address, or via the published port on the host:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">curl</span> http://172.17.0.2:8000\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span>DOCTYPE HTML PUBLIC <span class=\"token string\">\"-//W3C//DTD HTML 4.01//EN\"</span> <span class=\"token string\">\"http://www.w3.org/TR/html4/strict.dtd\"</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>html<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>head<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>meta http-equiv<span class=\"token operator\">=</span><span class=\"token string\">\"Content-Type\"</span> <span class=\"token assign-left variable\">content</span><span class=\"token operator\">=</span><span class=\"token string\">\"text/html; charset=utf-8\"</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>title<span class=\"token operator\">></span>Directory listing <span class=\"token keyword\">for</span> /<span class=\"token operator\">&lt;</span>/title<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>/head<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>body<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>h<span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>></span>Directory listing <span class=\"token keyword\">for</span> /<span class=\"token operator\">&lt;</span>/h<span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>></span>\n<span class=\"token operator\">&lt;</span>hr<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>ul<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>/ul<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>hr<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>/body<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>/html<span class=\"token operator\">></span>\n$ <span class=\"token function\">curl</span> http://localhost:8000</code></pre>\n              </div>\n            </div>\n          \n<p>We will see the IP address that matches the <code>docker0</code> adapter from the docker logs:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">$ docker run -it --rm -v <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token builtin class-name\">pwd</span><span class=\"token variable\">)</span></span><span class=\"token builtin class-name\">:</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token builtin class-name\">pwd</span><span class=\"token variable\">)</span></span> -w <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token builtin class-name\">pwd</span><span class=\"token variable\">)</span></span> -p <span class=\"token number\">8000</span>:8000 python:3.7 /bin/bash\nroot@e8407b9c71f9:/tmp/example<span class=\"token comment\"># python3 -m http.server</span>\nServing HTTP on <span class=\"token number\">0.0</span>.0.0 port <span class=\"token number\">8000</span> <span class=\"token punctuation\">(</span>http://0.0.0.0:8000/<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\n<span class=\"token number\">172.17</span>.0.1 - - <span class=\"token punctuation\">[</span>01/Dec/2020 02:52:21<span class=\"token punctuation\">]</span> <span class=\"token string\">\"GET / HTTP/1.1\"</span> <span class=\"token number\">200</span> -\n<span class=\"token number\">172.17</span>.0.1 - - <span class=\"token punctuation\">[</span>01/Dec/2020 02:52:23<span class=\"token punctuation\">]</span> <span class=\"token string\">\"GET / HTTP/1.1\"</span> <span class=\"token number\">200</span> -</code></pre>\n              </div>\n            </div>\n          \n<h3 id=\"mac\" style=\"position:relative;\"><a href=\"#mac\" aria-label=\"mac permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Mac</h3>\n<p>Firstly, <strong>there is no docker0 bridge on macOS</strong>. Due to the way networking is implemented on Mac, <strong>the interface exists within the virtual machine</strong>.</p>\n<p>Let's run through a quick example of the host and container communicating. Let's create a Python docker container running a web server, and publishing the port to the host machine:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Run a Python container</span>\n$ docker run -it --rm -v <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token builtin class-name\">pwd</span><span class=\"token variable\">)</span></span><span class=\"token builtin class-name\">:</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token builtin class-name\">pwd</span><span class=\"token variable\">)</span></span> -w <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token builtin class-name\">pwd</span><span class=\"token variable\">)</span></span> -p <span class=\"token number\">8000</span>:8000 python:3.7 /bin/bash\n\n<span class=\"token comment\"># Run a simple web server:</span>\nroot@91b3d7db6852:/tmp/example<span class=\"token comment\"># python3 -m http.server</span>\nServing HTTP on <span class=\"token number\">0.0</span>.0.0 port <span class=\"token number\">8000</span> <span class=\"token punctuation\">(</span>http://0.0.0.0:8000/<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.</code></pre>\n              </div>\n            </div>\n          \n<p>On our host machine we can curl port 8000 to interact with the docker container:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">curl</span> <span class=\"token number\">127.0</span>.0.1:8000\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span>DOCTYPE HTML PUBLIC <span class=\"token string\">\"-//W3C//DTD HTML 4.01//EN\"</span> <span class=\"token string\">\"http://www.w3.org/TR/html4/strict.dtd\"</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>html<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>head<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>meta http-equiv<span class=\"token operator\">=</span><span class=\"token string\">\"Content-Type\"</span> <span class=\"token assign-left variable\">content</span><span class=\"token operator\">=</span><span class=\"token string\">\"text/html; charset=utf-8\"</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>title<span class=\"token operator\">></span>Directory listing <span class=\"token keyword\">for</span> /<span class=\"token operator\">&lt;</span>/title<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>/head<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>body<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>h<span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>></span>Directory listing <span class=\"token keyword\">for</span> /<span class=\"token operator\">&lt;</span>/h<span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>></span>\n<span class=\"token operator\">&lt;</span>hr<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>ul<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>/ul<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>hr<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>/body<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>/html<span class=\"token operator\">></span></code></pre>\n              </div>\n            </div>\n          \n<p>We will see the docker container's logs update to signify that a request was successfully handled:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># The previously running web server now shows the get request</span>\nroot@91b3d7db6852:/tmp/example<span class=\"token comment\"># python3 -m http.server</span>\nServing HTTP on <span class=\"token number\">0.0</span>.0.0 port <span class=\"token number\">8000</span> <span class=\"token punctuation\">(</span>http://0.0.0.0:8000/<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\n<span class=\"token number\">172.17</span>.0.1 - - <span class=\"token punctuation\">[</span>01/Dec/2020 01:03:22<span class=\"token punctuation\">]</span> <span class=\"token string\">\"GET / HTTP/1.1\"</span> <span class=\"token number\">200</span> -</code></pre>\n              </div>\n            </div>\n          \n<p>For development purposes - to allow for the docker container to communicate to the host, you can use a pseudo dns entries or an IP:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Available since Docker 17.12</span>\nroot@91b3d7db6852:/tmp/foo<span class=\"token comment\"># curl docker.mac.for.local:8001</span>\n<span class=\"token punctuation\">..</span>.\n\n<span class=\"token comment\"># Available since of Docker 18.03</span>\nroot@91b3d7db6852:/tmp/foo<span class=\"token comment\"># curl host.docker.internal:8001</span>\n<span class=\"token punctuation\">..</span>.\n\nroot@91b3d7db6852:/tmp/foo<span class=\"token comment\"># curl 172.17.0.1:8001</span>\n<span class=\"token punctuation\">..</span>.</code></pre>\n              </div>\n            </div>\n          \n<p>On the host machine's logs we will see:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">$ python -m SimpleHTTPServer <span class=\"token number\">8001</span>\nServing HTTP on <span class=\"token number\">0.0</span>.0.0 port <span class=\"token number\">8001</span> <span class=\"token punctuation\">..</span>.\n<span class=\"token number\">127.0</span>.0.1 - - <span class=\"token punctuation\">[</span>01/Dec/2020 01:05:32<span class=\"token punctuation\">]</span> <span class=\"token string\">\"GET / HTTP/1.1\"</span> <span class=\"token number\">200</span> -\n<span class=\"token number\">127.0</span>.0.1 - - <span class=\"token punctuation\">[</span>01/Dec/2020 01:20:45<span class=\"token punctuation\">]</span> <span class=\"token string\">\"GET / HTTP/1.1\"</span> <span class=\"token number\">200</span> -</code></pre>\n              </div>\n            </div>\n          \n<p>We can also use <strong><code>docker inspect</code></strong> on the container for more information:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-json\"><code class=\"language-json\">$ docker inspect <span class=\"token number\">91</span>b<span class=\"token number\">3</span>d<span class=\"token number\">7</span>db<span class=\"token number\">6852</span>\n<span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"Id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"91b3d7db6852519060b9f7fb12c2c4a7a7d6cb340c6e2087d13a179d98a01068\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"Created\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2020-12-01T01:02:43.4832385Z\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"Path\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/bin/bash\"</span><span class=\"token punctuation\">,</span>\n         .... etc ...\n         <span class=\"token property\">\"NetworkSettings\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"Bridge\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"SandboxID\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"6dd875321d752ce1722982c51d8ecadb4c6f526007ca67fe13f2e002966199e6\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"HairpinMode\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"LinkLocalIPv6Address\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"LinkLocalIPv6PrefixLen\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Ports\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token property\">\"8000/tcp\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                    <span class=\"token punctuation\">{</span>\n                        <span class=\"token property\">\"HostIp\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0.0.0.0\"</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token property\">\"HostPort\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"8000\"</span>\n                    <span class=\"token punctuation\">}</span>\n                <span class=\"token punctuation\">]</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            .... etc ...\n            <span class=\"token property\">\"Networks\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token property\">\"bridge\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"IPAMConfig\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Links\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Aliases\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"NetworkID\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"f6b83dc59637f7871b769be4b642abf302bf1aab9b059322067500949562fbd7\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"EndpointID\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1224dd01e3373048a9b2a015e710207e8743ee8a588a60591c269cfec177c417\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Gateway\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"172.17.0.1\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"IPAddress\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"172.17.0.2\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"IPPrefixLen\"</span><span class=\"token operator\">:</span> <span class=\"token number\">16</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"IPv6Gateway\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"GlobalIPv6Address\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"GlobalIPv6PrefixLen\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"MacAddress\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"02:42:ac:11:00:02\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"DriverOpts\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre>\n              </div>\n            </div>\n          \n<h3 id=\"docker-compose\" style=\"position:relative;\"><a href=\"#docker-compose\" aria-label=\"docker compose permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>docker-compose</h3>\n<p>An additional CLI written with Python which simplifies the process of running multi-container Docker applications.</p>\n<p>Some benefits include:</p>\n<ul>\n<li>Container configuration with YAML</li>\n<li>Store configuration in Git alongside source code</li>\n<li>Container namespacing at runtime, i.e. creating a new network, and naming containers</li>\n</ul>\n<p>The important commands are:</p>\n<ul>\n<li><code>docker-compose build</code> - Build all of the required containers</li>\n<li><code>docker-compose up</code>  - Run all of the containers</li>\n<li><code>docker-compose down</code> - Stop all of the containers</li>\n<li><code>docker-compose exec</code> - Execute a one off command against a container</li>\n</ul>\n<p>An example <strong><code>docker-compose.yml</code></strong> file may be:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'3.7'</span>\n\n<span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">database</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> postgres<span class=\"token punctuation\">:</span>10.5<span class=\"token punctuation\">-</span>alpine\n    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n      <span class=\"token comment\"># The host machine may have postgres installed and running on port 5432, choosing an arbitrary port instead.</span>\n      <span class=\"token punctuation\">-</span> 5510<span class=\"token punctuation\">:</span><span class=\"token number\">5432</span>\n\n  <span class=\"token key atrule\">backend</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">context</span><span class=\"token punctuation\">:</span> ./backend\n    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n      <span class=\"token comment\"># The default port for flask is most likely taken, choose an arbitrary port instead.</span>\n      <span class=\"token punctuation\">-</span> 5511<span class=\"token punctuation\">:</span><span class=\"token number\">5000</span>\n    <span class=\"token key atrule\">depends_on</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> database\n    <span class=\"token key atrule\">entrypoint</span><span class=\"token punctuation\">:</span> dockerize <span class=\"token punctuation\">-</span>wait tcp<span class=\"token punctuation\">:</span>//database<span class=\"token punctuation\">:</span>5432 <span class=\"token punctuation\">-</span>timeout 30s\n    <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> flask run <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>host=0.0.0.0\n    <span class=\"token key atrule\">env_file</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> .env\n    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> ./backend<span class=\"token punctuation\">:</span>/srv/app\n\n  <span class=\"token key atrule\">frontend</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">context</span><span class=\"token punctuation\">:</span> ./frontend\n    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> 3000<span class=\"token punctuation\">:</span><span class=\"token number\">3000</span>\n    <span class=\"token key atrule\">depends_on</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> backend\n    <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> yarn dev\n    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> ./frontend/pages<span class=\"token punctuation\">:</span>/srv/app/pages\n      <span class=\"token punctuation\">-</span> ./frontend/src<span class=\"token punctuation\">:</span>/srv/app/src</code></pre>\n              </div>\n            </div>\n          \n<p>The runtime environment variables can be set by a <strong><code>.env</code></strong> file. Note that the database url references the container name, which docker will resolve:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-yaml\"><code class=\"language-yaml\">FLASK_DEBUG=1\nFLASK_APP=project/app\nDATABASE_URL=postgresql+psycopg2<span class=\"token punctuation\">:</span>//postgres@database<span class=\"token punctuation\">:</span>5432/postgres</code></pre>\n              </div>\n            </div>\n          \n<p><strong>Kubernetes</strong></p>\n<p>Kubernetes takes the art of running multi-container applications a step further. It also supports yaml configuration. However, it provides additional complexities such as application autoscaling, and deployment management of your production cluster. Although Kubernetes is more of a production tool, Docker for Desktop has support for Kubernetes:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0bcb4474fe13c6e863825453e28c8411/31a2d/kubernetes.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.08663729809104%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAAB0klEQVQoz5WSy3baMBCG/QrZEEoKsUx8J8ZYFrYhjt1Achpo6KKXTY6z6VPo1ZODpjM2JtA0p6eLz5Y0o39u0vI4HiR5Jq0okV6cSZfgzd+LZ9LhqSzvN1IUS+lEaWNHHPQfZ4X8+fRL3n39IZeb79IK+EDTLfdBFAsIsgLsKAWHZ3usSYokwK+XMM5KtL/aaO2JOWSLe4jyBfrcwrntb7QPzFwNL7lCngljFL0wf1Ljx7Oac3f8onvh/vyQgRM8o51QPdTSzgxrxfwQUEgFSa48nim8rNBZ+WKmsHwKVu8J8iP+3CPQQ62d4AQuAqFEcaum5R2MpjkG4IB9An71CS6TK3B5CthjsMIpYABKoKURRI0es9YoaK+YF4IZzVX6+ZviNw8Qll/AEdd4WQCWXDPCfmH2YI4FBo/31NkeCuJnRZu2DB3XbAdlQyIODoYuU2ZtduzVr23BW8G2F8bO2UQREm2zIjHW+L5fci04OhJ80/hDjmzH/iSIQ2HNUJAtHm7/JvwudZBwi6+CABwwDuXCXntihlNsGm5SiaH4B00bTHr4PIc4v4FoXsLHobPWTjqn3Z5uPHb7etU5G/wH/arTN6pT3a2Gtlsxy3k86XS7vwFfUEQd1i5iAgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"kubernetes\"\n        title=\"kubernetes\"\n        src=\"/static/0bcb4474fe13c6e863825453e28c8411/dc2fe/kubernetes.png\"\n        srcset=\"/static/0bcb4474fe13c6e863825453e28c8411/fc8b9/kubernetes.png 163w,\n/static/0bcb4474fe13c6e863825453e28c8411/d53b1/kubernetes.png 325w,\n/static/0bcb4474fe13c6e863825453e28c8411/dc2fe/kubernetes.png 650w,\n/static/0bcb4474fe13c6e863825453e28c8411/6251f/kubernetes.png 975w,\n/static/0bcb4474fe13c6e863825453e28c8411/72325/kubernetes.png 1300w,\n/static/0bcb4474fe13c6e863825453e28c8411/31a2d/kubernetes.png 1362w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"application-cheatsheets\" style=\"position:relative;\"><a href=\"#application-cheatsheets\" aria-label=\"application cheatsheets permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Application Cheatsheets</h3>\n<p>If you want to quickly test arbitrary versions of software, Docker is great. For instance if you wanted to test an older version of the <strong>Ruby REPL</strong>:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">$ docker run -it --rm -v <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token builtin class-name\">pwd</span><span class=\"token variable\">)</span></span><span class=\"token builtin class-name\">:</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token builtin class-name\">pwd</span><span class=\"token variable\">)</span></span> -w <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token builtin class-name\">pwd</span><span class=\"token variable\">)</span></span> ruby:2.5 /bin/bash\n\nroot@f91c616b84ec:/tmp/foo<span class=\"token comment\"># irb</span>\nirb<span class=\"token punctuation\">(</span>main<span class=\"token punctuation\">)</span>:001:<span class=\"token operator\"><span class=\"token file-descriptor important\">0</span>></span> puts RUBY_VERSION\n<span class=\"token number\">2.5</span>.8\n<span class=\"token operator\">=</span><span class=\"token operator\">></span> nil</code></pre>\n              </div>\n            </div>\n          \n<p>Jumping into a container with <strong>Python</strong>:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">$ docker run -it --rm -v <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token builtin class-name\">pwd</span><span class=\"token variable\">)</span></span><span class=\"token builtin class-name\">:</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token builtin class-name\">pwd</span><span class=\"token variable\">)</span></span> -w <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token builtin class-name\">pwd</span><span class=\"token variable\">)</span></span> python:3.7 /bin/bash\n\nroot@154dd0a667a6:/tmp/foo<span class=\"token comment\"># python3</span>\nPython <span class=\"token number\">3.7</span>.9 <span class=\"token punctuation\">(</span>default, Nov <span class=\"token number\">18</span> <span class=\"token number\">2020</span>, <span class=\"token number\">14</span>:10:47<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">[</span>GCC <span class=\"token number\">8.3</span>.0<span class=\"token punctuation\">]</span> on linux\nType <span class=\"token string\">\"help\"</span>, <span class=\"token string\">\"copyright\"</span>, <span class=\"token string\">\"credits\"</span> or <span class=\"token string\">\"license\"</span> <span class=\"token keyword\">for</span> <span class=\"token function\">more</span> information.\n<span class=\"token operator\">>></span><span class=\"token operator\">></span></code></pre>\n              </div>\n            </div>\n          \n<p>Or perhaps <strong>PHP</strong>:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-powershell\"><code class=\"language-powershell\">$ docker run <span class=\"token operator\">-</span>it <span class=\"token operator\">--</span><span class=\"token function\">rm</span> <span class=\"token operator\">-</span>v $<span class=\"token punctuation\">(</span><span class=\"token function\">pwd</span><span class=\"token punctuation\">)</span>:$<span class=\"token punctuation\">(</span><span class=\"token function\">pwd</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span>w $<span class=\"token punctuation\">(</span><span class=\"token function\">pwd</span><span class=\"token punctuation\">)</span> php:5<span class=\"token punctuation\">.</span>6<span class=\"token punctuation\">.</span>4 <span class=\"token operator\">/</span>bin<span class=\"token operator\">/</span>bash\n\nroot@89c80f4c734e:<span class=\"token operator\">/</span>tmp<span class=\"token operator\">/</span>example<span class=\"token comment\"># php foo.php</span>\nhello world\nroot@89c80f4c734e:<span class=\"token operator\">/</span>tmp<span class=\"token operator\">/</span>example<span class=\"token comment\"># php -a</span>\nInteractive shell\n\nphp > <span class=\"token function\">echo</span> 4 <span class=\"token operator\">+</span> 5<span class=\"token punctuation\">;</span>\n9\nphp ></code></pre>\n              </div>\n            </div>\n          \n<p>It's also useful to run arbitrary versions of <strong>databases</strong> too:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># The --env flag, or -e for short, can be used to inject any environment variable</span>\n$ docker run --rm -e <span class=\"token assign-left variable\">MYSQL_ROOT_PASSWORD</span><span class=\"token operator\">=</span>password -p <span class=\"token number\">3306</span>:3306 mariadb:10.5.8\n\n$ docker run --rm -p <span class=\"token number\">5432</span>:5432 -e <span class=\"token assign-left variable\">POSTGRES_PASSWORD</span><span class=\"token operator\">=</span>mysecretpassword postgres:13.1</code></pre>\n              </div>\n            </div>\n          \n<p>Or other common technologies such as <strong>redis</strong> etc:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">$ docker run --rm -p <span class=\"token number\">6379</span>:6379 redis</code></pre>\n              </div>\n            </div>\n          \n<p>Creating a throw away container with an <strong>older Ubuntu versions</strong>, publishing SMB ports on the host machine, and <strong>manually installing samba</strong>:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">$ docker run -it --rm -p <span class=\"token number\">139</span>:139 -p <span class=\"token number\">445</span>:445 ubuntu:16.04 /bin/bash\n\nroot@c9a2e1f1a0c9:/<span class=\"token comment\"># apt update</span>\nroot@c9a2e1f1a0c9:/<span class=\"token comment\"># apt install -y samba</span>\n\nroot@c9a2e1f1a0c9:/<span class=\"token comment\"># samba --version</span>\nVersion <span class=\"token number\">4.3</span>.11-Ubuntu\n\nroot@c9a2e1f1a0c9:/<span class=\"token comment\"># exit</span>\n$</code></pre>\n              </div>\n            </div>\n          \n<p>Or if you wanted a more permanent <code>Dockerfile</code> to add to your collection:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\">FROM ubuntu:16.04\n\nRUN <span class=\"token function\">apt</span> update <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">\\</span>\n    <span class=\"token assign-left variable\">DEBIAN_FRONTEND</span><span class=\"token operator\">=</span>noninteractive <span class=\"token function\">apt</span> <span class=\"token function\">install</span> -y <span class=\"token punctuation\">\\</span>\n        samba\n\n<span class=\"token comment\"># ...</span></code></pre>\n              </div>\n            </div>\n          \n<h2 id=\"gotchas\" style=\"position:relative;\"><a href=\"#gotchas\" aria-label=\"gotchas permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gotchas</h2>\n<h3 id=\"binbash-not-present\" style=\"position:relative;\"><a href=\"#binbash-not-present\" aria-label=\"binbash not present permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>/bin/bash not present</h3>\n<p>You may try starting an interactive container, for it to immediately fail with the following error. Try using <code>/bin/sh</code> or <code>/bin/csh</code> etc instead:</p>\n\n            <div class=\"code-snippet\">\n              \n              <div class=\"gatsby-highlight\">\n                <pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Trying to use /bin/bash doesn't work</span>\n$ docker run -it --rm some_image /bin/bash\ndocker: Error response from daemon: OCI runtime create failed: container_linux.go:346: starting container process caused <span class=\"token string\">\"exec: <span class=\"token entity\" title=\"\\&quot;\">\\\"</span>/bin/bash<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>: stat /bin/bash: no such file or directory\"</span><span class=\"token builtin class-name\">:</span> unknown.\n\n<span class=\"token comment\"># Try a different shell</span>\n$ docker run -it --rm some_image /bin/sh\n/example $</code></pre>\n              </div>\n            </div>\n          \n<h3 id=\"containers-running-out-of-memory\" style=\"position:relative;\"><a href=\"#containers-running-out-of-memory\" aria-label=\"containers running out of memory permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Containers running out of memory</h3>\n<p>If you're running large Java docker containers, they may run out of memory. Depending on the configuration the containers may restart frequently, or start and immediately die. The 137 exit status code is generally an indicator that the docker container has been killed due to memory constraints. You can configure this limit:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9d05946cd5cb2757abd6af9c80c622dd/ee287/docker-memory.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.08663729809104%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAACC0lEQVQoz42S227aQBCGeYU2LccA9trYxsf1+gw4KCEVAqGolVpVihzloi/hZw/KTmfXhlClqnrx2euZ9T//7GynTJJxXua1GeW1Ey9qOy7OiO85xm93D3W6vq/nLH+L45ou1vXP51/19uuP+svD99oI4klHMexDcrMBv1iDGeZgRcUZk+VgYIyt7iAQeXaRZwU4yRKKzQ5YuYHo5h6mpnPoDNTZTvMijrwIiMuOqhNK0N0RnRwNmh5Vm57jl0ws/2U6DwR8qBq7zoiYO8UOQKcLnm2/8Whz4G655WZccoNmfNZCvJhjsX8BQ4KC4kGcEFQ34tgeD5d3oAcpEC9CEtCCDFQvA+Ij+BNxoxYmQZdSEN9CcC8FxYcImjTlbrrENRZwKLpuzkrzWhEvbgq1guK/d4KjVlCco5eVUtDCwxcxHd1pfoprJjq4cPcfgrofcx8FrTCTjmQRFBQuMYckf7bbdPX3lpsWQz61KVeQ0ybNT3AgBbdwQFa0wsGkXPUSTvz8JPJ+KCeHbfL1tAHb5LMglZPWxIQRdIlFUimotoJ41q9KY6RxeK2beztZAN43mAUJGLQF13a8AC9dgYsX2ME9LmLHSzDYSuYNihc/KoEtb4HixR/r1r7zodvvDRXyOBgrT93RpOpd8GlwXV31R/J94jPSHY4wP666Y1L1lHmlGtaTMjMfP3b7/d88n0PistOY4QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"docker-memory\"\n        title=\"docker-memory\"\n        src=\"/static/9d05946cd5cb2757abd6af9c80c622dd/dc2fe/docker-memory.png\"\n        srcset=\"/static/9d05946cd5cb2757abd6af9c80c622dd/fc8b9/docker-memory.png 163w,\n/static/9d05946cd5cb2757abd6af9c80c622dd/d53b1/docker-memory.png 325w,\n/static/9d05946cd5cb2757abd6af9c80c622dd/dc2fe/docker-memory.png 650w,\n/static/9d05946cd5cb2757abd6af9c80c622dd/6251f/docker-memory.png 975w,\n/static/9d05946cd5cb2757abd6af9c80c622dd/72325/docker-memory.png 1300w,\n/static/9d05946cd5cb2757abd6af9c80c622dd/ee287/docker-memory.png 2724w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"host-machine-running-out-of-memory\" style=\"position:relative;\"><a href=\"#host-machine-running-out-of-memory\" aria-label=\"host machine running out of memory permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Host Machine running out of memory</h3>\n<p>You may have no longer needed containers / images that you wish to remove:</p>\n<ul>\n<li><code>docker system prune</code> - Remove all unused data</li>\n<li><code>docker kill $(docker ps -a -q)</code> - Kill all containers</li>\n<li><code>docker rmi -f $(docker images -a -q)</code> - Remove <em>all</em> images</li>\n</ul>\n<h3 id=\"security-aspects\" style=\"position:relative;\"><a href=\"#security-aspects\" aria-label=\"security aspects permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Security Aspects</h3>\n<p>Firstly, there are build stage security issues:</p>\n<ul>\n<li>Not specifying a <code>.dockerignore</code> file correctly can lead to files being copied from your docker context in to the final image unintentionally, for instance the contents of <code>.git/.env</code> . For images that are running web servers, this may lead to these files being accessible to publicly, or if the images are distributed users may gain access to secrets unintentionally.</li>\n<li>Do not inline passwords/credentials in your Dockerfile commands, they can be seen with <code>docker history</code>. Use docker secrets.</li>\n<li>Do not use intermediate stages if credentials/sensitive files are used. Ensure they are 'atomic' and no longer exist at the end of the stage - otherwise if the intermediate layer can be run in isolation, it's possible to to retrieve the credentials. Always check the latest best practices.</li>\n</ul>\n<p>Additionally there are run time security issues:</p>\n<ul>\n<li>If you don't specify an IP with  <code>--publish</code> then it will default to <code>0.0.0.0</code>. This may or may not be a security concern for your use case and set up.</li>\n<li>Mounted volumes allows for files to be shared between the container and the host machine. This also means if the docker container runs as root, it can write files on the host with root permissions, potentially with the SUID bit set - potentially leading to local privilege escalation.</li>\n<li>Docker in docker is possible by mounting the docker socket in a container. If the container gets compromised - then the child container can interact with the mounted docker socket to create a new container with custom options, including mounting the host file system directly, allowing access to arbitrary files - potentially including <code>/root</code> etc. This problem also exists if a user is granted write permissions to this socket with <code>docker -H unix:///var/run/docker.sock run -v /:/host -it ubuntu chroot /host /bin/bash</code></li>\n<li>When testing software, Docker also provides a <code>--read-only</code> flag when running containers, and read-only volumes</li>\n</ul>","frontmatter":{"title":"Practical Docker","date":"11 December, 2020"},"fields":{"slug":"/posts/practical-docker/","editURL":"https://github.com/AlanFoster/alanfoster.github.io/edit/develop/src/pages/posts/practical-docker/index.markdown"}}},"pageContext":{"sidebarPath":null,"slug":"/posts/practical-docker/"}}}